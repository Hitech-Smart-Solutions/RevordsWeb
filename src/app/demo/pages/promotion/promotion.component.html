<div class="bodyclass">
    <div>
        <div class="col-md-12 p-0 flexdivHeader">
            <div class="col-md-7">
                <h1 *ngIf="!iseditmode" class="headerName">
                    <img style="margin-top: -5px;height: 25px;" src="../../../../assets/img/icons/Promotion.svg">
                    Promotion
                </h1>
                <h1 *ngIf="iseditmode" class="headerName">
                    <img style="margin-top: -5px;height: 25px;" src="../../../../assets/promotion/Create Promotion.svg">
                    Create Promotion
                </h1>
            </div>
            <div class="col-md-3">
                <form *ngIf="!iseditmode" [formGroup]="dashBoardFormControl">
                    <ng-multiselect-dropdown placeholder="Choose business locations" (onSelect)="common()"
                        (onSelectAll)="onItemSelectAll($event)" formControlName="businessID"
                        [settings]="dropdownSettings" (onDeSelect)="common()" (onDeSelectAll)="onDeSelectAll($event)"
                        [data]="business">
                    </ng-multiselect-dropdown>
                </form>
            </div>
            <div class="col-md-2 p-0 flexRight">
                <button class="btn btn-success text-center" (click)="CreatePromotion()" *ngIf="!iseditmode" [disabled]="isLoading">
                    <img alt="phonevector" class="filter-green"
                        [ngClass]="{'fa-spin fa-spinner': isLoading, 'fa-edit' : !isLoading && !iseditmode, 'fa-times' : !isLoading && iseditmode}"
                        src="../../../../assets/promotion/Create Promotion.svg">
                    Create Promotion
                </button>
                <button class="btn btn-success text-center brownColor" (click)="CreatePromotion()" *ngIf="iseditmode" [disabled]="isLoading">
                    Cancel
                    <img alt="phonevector" class="filter-green"
                        [ngClass]="{'fa-spin fa-spinner': isLoading, 'fa-edit' : !isLoading && !iseditmode, 'fa-times' : !isLoading && iseditmode}"
                        src="../../../../assets/img/icons/Cancel.svg">
                </button>
            </div>
        </div>
        <div *ngIf="!iseditmode">
            <div class="row">
                <div class="col-md-12" style="margin-top:5px;" *ngFor='let p of displayData'>
                    <mat-accordion class="example-headers-align" multi>
                        <mat-expansion-panel>
                            <mat-expansion-panel-header style="height:100% !important; padding: 10px 20px 10px 20px;">
                                <mat-panel-title style="display: block !important;">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="row" class="info">{{p.promotionalMessage}}</div>
                                            <div class="row" class="summary">
                                                <div class="col-md-12 d-flex pr-0 pl-0">
                                                    <div class="col-md-8 pl-0 pr-0">
                                                        <div>
                                                            <span>Sent : </span>
                                                            {{p.sentDate | utcToLocalTime: 'short'}}
                                                        </div>
                                                        <div>
                                                            Valid : {{p.offerStartDate | date:'M/d'}} - {{p.offerEndDate
                                                            |
                                                            date:'M/d'}}
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4 d-flex"
                                                        style="align-items: center;justify-content: center;">
                                                        <span id='summaryLabel'
                                                            (click)="EditReplicate(p.id)">Replicate</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-8 d-flex">
                                            <div class="col-md-4">
                                                <div class=" row d-flex p-3">
                                                    <div class="col-md-6 col-auto p-0">
                                                        <div class="p-0 details">
                                                            {{p.totalDelivered}}
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 p-0">
                                                        <div class="mt-2 mr-2">
                                                            <span class="overview-amount ng-binding inner ">
                                                                Delivered
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4 ">
                                                <div class="row d-flex p-3">
                                                    <div class="col-md-6 col-auto p-0">
                                                        <div class="p-0 details ">
                                                            {{p.totalEngagements}}
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 p-0 ">
                                                        <div class="mt-2 mr-2">
                                                            <span class="overview-amount ng-binding inner ">
                                                                Visits
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="row d-flex p-3">
                                                    <div class="col-md-8 col-auto p-0">
                                                        <div class="p-0 details ">
                                                            {{p.totalVisitsRate}}%
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4 p-0 ">
                                                        <div class="mt-2 mr-2">
                                                            <span class="overview-amount ng-binding inner ">
                                                                Visit Rate
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </mat-panel-title>
                            </mat-expansion-panel-header>
                            <div class="row">
                                <div class="col-md-4">
                                    <!-- <p class="detailsummary">{{p.occasion}}</p> -->
                                </div>
                                <div class="col-md-8 d-flex" style="padding-left: 0px !important;">
                                    <div class="col-md-4" style="border-right: 1px solid #d7d3d3;">
                                        <div class="row d-flex p-0">
                                            <div class="col-md-4 col-auto p-0">
                                                <div class="p-0 details ">
                                                </div>
                                            </div>
                                            <div class="col-md-8 p-0 ">
                                                <div class="mt-2 mr-2">
                                                    <p style="margin-bottom: 0px !important; ">
                                                        App
                                                        <span class="float-right"> {{p.notificationCount}}
                                                        </span>
                                                    </p>
                                                    <p style="margin-bottom: 0px !important; ">
                                                        Email
                                                        <span class="float-right"> {{p.emailCount}}</span>
                                                    </p>
                                                    <p style="margin-bottom: 0px !important; ">
                                                        SMS
                                                        <span class="float-right"> {{p.smsMmsCount}}</span>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4" style="border-right: 1px solid #d7d3d3;">
                                        <div class="row d-flex p-0">
                                            <div class="col-md-4 col-auto p-0">
                                                <div class="p-0 details ">
                                                </div>
                                            </div>
                                            <div class="col-md-8 p-0 ">
                                                <div class="mt-2 mr-2">
                                                    <p style="margin-bottom: 0px !important; ">Claim
                                                        <span class="float-right"> {{p.claims}} </span>
                                                    </p>
                                                    <p style="margin-bottom: 0px !important; ">Redemptions
                                                        <span class="float-right"> {{p.redemptions}} </span>
                                                    </p>
                                                    <p style="margin-bottom: 0px !important; ">Opt-Outs
                                                        <span class="float-right"> {{p.optOuts}} </span>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4" style="border-right: 1px solid #d7d3d3;">
                                        <div class="row d-flex p-0">
                                            <div class="col-md-4 col-auto p-0">
                                                <div class="p-0 details ">
                                                </div>
                                            </div>
                                            <div class="col-md-8 p-0 ">
                                                <div class="mt-2 mr-2">
                                                    <p style="margin-bottom: 0px !important; ">Claim
                                                        <span class="float-right"> {{p.totalClaimRate}}%</span>
                                                    </p>
                                                    <p style="margin-bottom: 0px !important; ">Redemptions
                                                        <span class="float-right"> {{p.totalredeemRate}}%</span>
                                                    </p>
                                                    <p style="margin-bottom: 0px !important; ">Opt-Outs
                                                        <span class="float-right"> {{p.totaloptoutRate}}% </span>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </mat-expansion-panel>
                    </mat-accordion>
                </div>
            </div>
            <div class="col-lg-12 divmore ">
                <button class="more" (click)="showMore() ">Show More</button>
            </div>
            <div *ngIf="isLoadingAnnData " class="d-flex justify-content-center ">
                <div class="spinner-border " role="status ">
                    <span class="sr-only ">Loading...</span>
                </div>
            </div>
        </div>
        <div *ngIf="iseditmode">
            <div>
                <div class="row">
                    <div class="col-md-12">
                        <mat-stepper #stepper>
                            <mat-step [stepControl]="firstFormGroup" errorMessage="Promotion details are required.">
                                <div class="row">
                                    <div class="col-md-8">
                                        <form [formGroup]="firstFormGroup">
                                            <ng-template matStepLabel>Step 1</ng-template>
                                            <div class="promotion">
                                                <div class="row">
                                                    <div class="col-md-8">
                                                        <h4 class="head"
                                                            *ngIf="firstFormGroup.controls['MuliplePromo'].value == false">
                                                            Promotion
                                                        </h4>
                                                        <h4 class="head"
                                                            *ngIf="firstFormGroup.controls['MuliplePromo'].value == true">
                                                            Promotion 1
                                                        </h4>
                                                    </div>
                                                    <div class="col-md-3 text-end">
                                                        <p style="font-size:16px;margin-bottom: 0px;">
                                                            Dual Promotion
                                                        </p>
                                                    </div>
                                                    <div class="col-md-1" style="padding-left: 0.5rem;">
                                                        <label class="switch">
                                                            <input type="checkbox" (click)="btnAddPromo()"
                                                                formControlName="MuliplePromo">
                                                            <span class="slider round"></span>
                                                            <span class="texter"
                                                                style="visibility: hidden !important;"></span>
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <input type="text" formControlName="promotionalMessage1"
                                                            placeholder="Write your promotion message here. e.g. '15% off storewide, excluding sale items.'"
                                                            class="form-control" maxlength="50"
                                                            [ngClass]="{ 'is-invalid': submitted && firstFormGroup.controls['promotionalMessage1'].errors }"
                                                            (keyup)="ontextchanged(50,'promotionalMessage1')" />
                                                        <div>
                                                            <p *ngIf="isValidPromoMSG1"
                                                                style="color: green;font-weight: 400; margin-bottom: 5px !important;">
                                                                <span class="dotGreen"></span>
                                                                {{isValidPromoMSG1MSG}}
                                                            </p>
                                                            <p *ngIf="!isValidPromoMSG1 && isValidPromoMSG1 != null"
                                                                style="color: gray;font-weight: 300; margin-bottom: 5px !important;">
                                                                <span class="dot"></span>
                                                                {{isValidPromoMSG1MSG}}
                                                            </p>
                                                            <p class="displayMSG">
                                                                {{subjectCharacterCount1}} characters left
                                                            </p>
                                                        </div>
                                                        <div *ngIf="submitted && firstFormGroup.controls['promotionalMessage1'].errors"
                                                            class="invalid-feedback">
                                                            <div
                                                                *ngIf="firstFormGroup.controls['promotionalMessage1'].errors['required']">
                                                                Promotion Message is required</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row" style="margin-left: -8%;">
                                                    <div class="col-md-3">
                                                        <p class="betweenLbl"><img
                                                                src="../../../../assets/img/icons/Is redeemable.svg"
                                                                class="margin55">Is
                                                            Redeemable?
                                                        </p>
                                                    </div>
                                                    <div class="col-md-1">
                                                        <label class="switch">
                                                            <input type="checkbox" formControlName="isRedeemable1">
                                                            <span class="slider round"></span>
                                                            <span class="texter"></span>
                                                        </label>
                                                    </div>
                                                    <div class="col-md-3" *ngIf="isSpinRequired">

                                                        <p class="betweenLbl"> <img
                                                                src="../../../../assets/img/icons/Allow spin wheel.svg"
                                                                class="margin55">Allow
                                                            Spinwheel?</p>
                                                    </div>
                                                    <div class="col-md-1" *ngIf="isSpinRequired">
                                                        <label class="switch">
                                                            <input type="checkbox" formControlName="isSpinWheelAllowed1"
                                                                (change)='allowSpinwheel()'>
                                                            <span class="slider round"></span>
                                                            <span class="texter"></span>
                                                        </label>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <p class="betweenLbl"><img
                                                                src="../../../../assets/img/icons/Turn on word of mouth.svg"
                                                                class="margin55">Word of Mouth?</p>
                                                        <p class="betweenLbl"
                                                            style="color: gray;margin-right: -12px;font-size: 11px;">
                                                            Can
                                                            share
                                                            with friends.</p>
                                                    </div>
                                                    <div class="col-md-1">
                                                        <label class="switch">
                                                            <input type="checkbox" formControlName="isWordOfMouth1">
                                                            <span class="slider round"></span>
                                                            <span class="texter"></span>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="promotion mt-2" *ngIf="showPromo2 == true">
                                                <div class="row" *ngIf="showPromo2 == true">
                                                    <h4 class="head">Promotion 2</h4>
                                                </div>
                                                <div class="row" *ngIf="showPromo2 == true">
                                                    <div class="col-md-12">
                                                        <input type="text" formControlName="promotionalMessage2"
                                                            placeholder="e.g. '15% off storewide, excluding sale items.'"
                                                            class="form-control" maxlength="50"
                                                            [ngClass]="{ 'is-invalid': submitted && firstFormGroup.controls['promotionalMessage2'].errors }"
                                                            (keyup)="ontextchanged(50,'promotionalMessage2')" />
                                                        <div>
                                                            <p *ngIf="isValidPromoMSG2"
                                                                style="color: green;font-weight: 400; margin-bottom: 5px !important;">
                                                                <span class="dotGreen"></span>
                                                                {{isValidPromoMSG2MSG}}
                                                            </p>
                                                            <p *ngIf="!isValidPromoMSG2  && isValidPromoMSG2 != null"
                                                                style="color: gray;font-weight: 300; margin-bottom: 5px !important;">
                                                                <span class="dot"
                                                                    *ngIf="!isValidPromoMSG2  && isValidPromoMSG2 != null"></span>
                                                                {{isValidPromoMSG2MSG}}
                                                            </p>
                                                            <p class="displayMSG">
                                                                {{subjectCharacterCount2}} characters left</p>
                                                        </div>
                                                        <div *ngIf="submitted && firstFormGroup.controls['promotionalMessage2'].errors"
                                                            class="invalid-feedback">
                                                            <div
                                                                *ngIf="firstFormGroup.controls['promotionalMessage2'].errors['required']">
                                                                Promotion Message is required</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row" style="margin-left: -8%;" *ngIf="showPromo2 == true">
                                                    <div class="col-md-3">
                                                        <p class="betweenLbl"> <img
                                                                src="../../../../assets/img/icons/Is redeemable.svg"
                                                                class="margin55">Is Redeemable?</p>
                                                    </div>
                                                    <div class="col-md-1">
                                                        <label class="switch">
                                                            <input type="checkbox" formControlName="isRedeemable2">
                                                            <span class="slider round"></span>
                                                            <span class="texter"></span>
                                                        </label>
                                                    </div>
                                                    <div class="col-md-3" *ngIf="isSpinRequired">
                                                        <p class="betweenLbl"> <img
                                                                src="../../../../assets/img/icons/Allow spin wheel.svg"
                                                                class="margin55">Allow Spinwheel?</p>
                                                    </div>
                                                    <div class="col-md-1" *ngIf="isSpinRequired">
                                                        <label class="switch">
                                                            <input type="checkbox" formControlName="isSpinWheelAllowed2"
                                                                (change)='allowSpinwheel()'>
                                                            <span class="slider round"></span>
                                                            <span class="texter"></span>
                                                        </label>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <p class="betweenLbl"><img
                                                                src="../../../../assets/img/icons/Turn on word of mouth.svg"
                                                                class="margin55">Word of Mouth?</p>
                                                        <p class="betweenLbl"
                                                            style="color: gray;margin-right: -14px;font-size: 11px;">
                                                            Can
                                                            share
                                                            with friends.</p>
                                                    </div>
                                                    <div class="col-md-1">
                                                        <label class="switch">
                                                            <input type="checkbox" formControlName="isWordOfMouth2">
                                                            <span class="slider round"></span>
                                                            <span class="texter"></span>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row promotionwhite mt-2">
                                                <div class="col-md-12">
                                                    <h4 class="head">What’s the occasion?</h4>
                                                    <angular-editor #editor
                                                        style="background-color: #ffffff; border-radius: 15px;"
                                                        formControlName="occasionHTML" [config]="config"
                                                        (keyup)="ontextchanged(0,'occasion')">
                                                    </angular-editor>
                                                    <div>
                                                        <p class="displayMSG">
                                                            {{descriptionCharacterCount}} characters left</p>
                                                    </div>
                                                    <div *ngIf="submitted && firstFormGroup.controls['occasion'].errors"
                                                        class="invalid-feedback">
                                                        <div
                                                            *ngIf="firstFormGroup.controls['occasion'].errors['required']">
                                                            Occasion is required
                                                        </div>
                                                        <div
                                                            *ngIf="firstFormGroup.controls['occasion'].errors['maxlength']">
                                                            Occasion must be less than {{packageDetails.isMms ==
                                                            true
                                                            ?
                                                            1200 :
                                                            145}} characters long
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row promotion mt-2" *ngIf='this.packageDetails.isMms == true'>
                                                <div class="form-group mb-2">
                                                    <div class="mb-2">
                                                        <b class="head">Pick image for good promotion (.png or .jpg)</b>
                                                    </div>
                                                    <div class="col-lg-12"
                                                        style="display: flex;padding: 0px;align-items: center;">
                                                        <div class="col-lg-8 p-0"
                                                            *ngIf="uploadProgress == undefined && uploadProgress == null">
                                                            <label for="files" class="dropbox">Select Image to upload
                                                            </label>
                                                            <input #fileUpload id="files" style="visibility:hidden;"
                                                                class="form-control" text="Select Image to upload"
                                                                type="file" (change)="onChange($event)" />
                                                        </div>
                                                        <div class="col-lg-8 p-0 progress"
                                                            *ngIf="uploadProgress != undefined && uploadProgress != null && uploadProgress != '100%'">
                                                            <div class="progress-bar bluecolor" role="progressbar"
                                                                [style.width]="uploadProgress"
                                                                aria-valuenow="uploadProgress" aria-valuemin="0"
                                                                aria-valuemax="100">
                                                                {{uploadProgress}}
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-4 form-group mb-0"
                                                            style="display: flex;align-items: center;">
                                                            <div style="margin-right: 10px;">
                                                                <span class="bold" style="font-weight: bold;"
                                                                    *ngIf="isfileUploaded == false">
                                                                    {{fileName}}
                                                                </span>
                                                            </div>
                                                            <div *ngIf="loadingLoading">
                                                                <div class="spinner-border" role="status">
                                                                    <span class="sr-only">Loading...</span>
                                                                </div>
                                                            </div>
                                                            <div style="display: flex;align-items: center;">
                                                                <!-- <button class="btn btn-success buttonColor"
                                                                    *ngIf="!uploadProgress" (click)="onUpload()">
                                                                    Upload
                                                                    <mat-icon class="filter-green"
                                                                        style="margin-bottom: -6px;margin-left: 6px;">
                                                                        cloud_upload
                                                                    </mat-icon>
                                                                </button> -->
                                                                <mat-icon class="cancel-upload" (click)="cancelUpload()"
                                                                    *ngIf="uploadProgress" style="color: red;">
                                                                    delete_forever
                                                                </mat-icon>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-lg-12 p-0">
                                                        <span><b>Note: </b></span>
                                                        <span style="font-size: 12px;">
                                                            It is your legal responsibility to upload SHAFT compliant
                                                            image.
                                                        </span>
                                                    </div>

                                                    <!-- <div class="progress">
                                                        <div class="progress-bar bluecolor" role="progressbar"
                                                            [style.width]="uploadProgress"
                                                            aria-valuenow="uploadProgress" aria-valuemin="0"
                                                            aria-valuemax="100">
                                                            {{uploadProgress}}
                                                        </div>
                                                    </div> -->
                                                </div>
                                            </div>
                                            <div class="row promotionwhite mt-2">
                                                <div class="mb-2">
                                                    <b class="head">Offer validation time?</b>
                                                </div>
                                                <div class="col-lg-12" style="display: flex;padding: 0px;">
                                                    <div class="col-md-6">
                                                        <input type="date" class="form-control"
                                                            formControlName="offerStartDate" (change)="onDateChange()"
                                                            [min]="minDate" [max]="endDate"
                                                            [ngClass]="{ 'is-invalid': submitted && firstFormGroup.controls['offerStartDate'].errors }">
                                                        <div *ngIf="submitted && firstFormGroup.controls['offerStartDate'].errors"
                                                            class="invalid-feedback">
                                                            <div
                                                                *ngIf="firstFormGroup.controls['offerStartDate'].errors['required']">
                                                                Start date is required
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <input type="date" class="form-control"
                                                            formControlName="offerEndDate" (change)="onDateChange()"
                                                            [min]="minDate < startDate ? startDate : minDate"
                                                            [ngClass]="{ 'is-invalid': submitted && firstFormGroup.controls['offerEndDate'].errors }">
                                                        <div *ngIf="submitted && firstFormGroup.controls['offerEndDate'].errors"
                                                            class="invalid-feedback">
                                                            <div
                                                                *ngIf="firstFormGroup.controls['offerEndDate'].errors['required']">
                                                                End date is required
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row promotionwhite mt-2">
                                                <div class="col-md-6 p-0">
                                                    <mat-radio-group layout="row" formControlName='isSendSoon'
                                                        aria-label="Select an option"
                                                        (change)="onScheduleLaterSelected()">
                                                        <mat-radio-button value="1">Send Now</mat-radio-button>
                                                        <mat-radio-button value="2">
                                                            Schedule it for later
                                                        </mat-radio-button>
                                                    </mat-radio-group>
                                                </div>
                                                <div *ngIf="submitted && firstFormGroup.controls['isSendSoon'].errors"
                                                    class="invalid-feedback">
                                                    <div
                                                        *ngIf="firstFormGroup.controls['isSendSoon'].errors['required']">
                                                        Send now/Schedule later is required
                                                    </div>
                                                </div>
                                                <div *ngIf='this.firstFormGroup.controls["isSendSoon"].value == 1'
                                                    class="col-md-8">
                                                    <span>SMS and emails will be sent between 9 AM and 9 PM.</span>
                                                </div>
                                            </div>
                                            <div class="row promotionwhite mt-2"
                                                *ngIf='this.firstFormGroup.controls["isSendSoon"].value == 2'>
                                                <div class="col-md-4">
                                                    <input type="date" class="form-control" formControlName="date"
                                                        [min]="minDate" [max]="maxDate"
                                                        (change)="onScheduleDateChanged()">
                                                </div>
                                                <div class="col-md-1">
                                                    at
                                                </div>
                                                <div class="col-md-4">
                                                    <select class="form-select" formControlName="time"
                                                        (change)='scheduleTimeChanged()'>
                                                        <option selected value="0" disabled>Select</option>
                                                        <option *ngFor='let t of time' [value]="t.value"
                                                            [disabled]="t.disabled">
                                                            {{t.name}}
                                                        </option>
                                                    </select>
                                                </div>
                                                <div class="col-md-1">
                                                    CDT
                                                </div>
                                                <div class="col-ms-2"></div>
                                            </div>

                                            <div class="modal fade" id="myModal" tabindex="-1" role="dialog"
                                                aria-labelledby="myModalLabel" aria-hidden="true">
                                                <div class="modal-dialog">
                                                    <div class="modal-content" style="width: 725px;">
                                                        <div class="modal-header">
                                                            <div type="button" class="close" data-dismiss="modal"
                                                                aria-hidden="true" #closebutton>&times;</div>
                                                        </div>

                                                        <div class="modal-body">
                                                            <div class="es-wrapper-color">
                                                                <table class="es-wrapper" width="100%" cellspacing="0"
                                                                    cellpadding="0">
                                                                    <tr>
                                                                        <td valign="top">
                                                                            <table cellpadding="0" cellspacing="0"
                                                                                class="es-header" align="center">
                                                                                <tr>
                                                                                    <td align="center">
                                                                                        <table class="es-header-body"
                                                                                            align="center"
                                                                                            cellpadding="0"
                                                                                            cellspacing="0" width="600"
                                                                                            style="background-color: transparent; border-top: 1px solid #4c8aa7;  border-left: 1px solid #4c8aa7; border-right: 1px solid #4c8aa7;">
                                                                                            <tr>
                                                                                                <td class="es-p20"
                                                                                                    align="left"
                                                                                                    style="border-radius: 10px 10px 0px 0px;">
                                                                                                    <table
                                                                                                        cellpadding="0"
                                                                                                        cellspacing="0"
                                                                                                        width="100%">
                                                                                                        <tr>
                                                                                                            <td width="560"
                                                                                                                class="es-m-p0r"
                                                                                                                valign="top"
                                                                                                                align="center">
                                                                                                                <table
                                                                                                                    cellpadding="0"
                                                                                                                    cellspacing="0"
                                                                                                                    width="100%"
                                                                                                                    style="border-radius: 1px;border-collapse: separate"
                                                                                                                    role="presentation">
                                                                                                                    <tr>
                                                                                                                        <td align="center"
                                                                                                                            style="font-size: 0px">
                                                                                                                            <a target="_blank"
                                                                                                                                href="https://viewstripo.email">
                                                                                                                                <img align="center"
                                                                                                                                    border="0"
                                                                                                                                    src="../../../../assets/images/fortune.png"
                                                                                                                                    alt="Image"
                                                                                                                                    title="Image"
                                                                                                                                    style="outline: none;text-decoration: none;-ms-interpolation-mode: bicubic;clear: both;display: inline-block !important;border: none;height: auto;float: none;width: 32%;max-width: 179.2px;"
                                                                                                                                    width="179.2" />
                                                                                                                            </a>
                                                                                                                        </td>
                                                                                                                    </tr>
                                                                                                                </table>
                                                                                                            </td>
                                                                                                        </tr>
                                                                                                    </table>
                                                                                                </td>
                                                                                            </tr>
                                                                                        </table>
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                            <table class="es-content" cellspacing="0"
                                                                                cellpadding="0" align="center">
                                                                                <tr>
                                                                                    <td align="center">
                                                                                        <table class="es-content-body"
                                                                                            style="border-left:1px solid #4c8aa7;border-right:1px solid #4c8aa7;background-color: #ffffff"
                                                                                            width="600" cellspacing="0"
                                                                                            cellpadding="0"
                                                                                            bgcolor="#ffffff"
                                                                                            align="center">
                                                                                            <tr>
                                                                                                <td class="es-p30t es-p20r es-p20l"
                                                                                                    align="left"
                                                                                                    bgcolor="#ffffff"
                                                                                                    style="background-color: #ffffff">
                                                                                                    <table
                                                                                                        cellpadding="0"
                                                                                                        cellspacing="0"
                                                                                                        width="100%"
                                                                                                        style="margin-top: -15px;">
                                                                                                        <tr>
                                                                                                            <td class="es-m-p0r"
                                                                                                                width="558"
                                                                                                                valign="top"
                                                                                                                align="center">
                                                                                                                <table
                                                                                                                    width="100%"
                                                                                                                    cellspacing="0"
                                                                                                                    cellpadding="0"
                                                                                                                    role="presentation">
                                                                                                                    <tr
                                                                                                                        *ngIf='this.showPromo2 == false'>
                                                                                                                        <td align="center"
                                                                                                                            class="es-m-txt-c es-p5t es-p5b">
                                                                                                                            <p
                                                                                                                                style="font-size: 20px;color: #666666;line-height: 40px">
                                                                                                                                {{this.firstFormGroup.controls['promotionalMessage1'].value}}
                                                                                                                            </p>
                                                                                                                        </td>
                                                                                                                    </tr>

                                                                                                                    <tr
                                                                                                                        *ngIf='this.showPromo2 == true'>
                                                                                                                        <td align="center"
                                                                                                                            class="es-m-txt-c es-p5t es-p5b">
                                                                                                                            <p
                                                                                                                                style="font-size: 20px;color: #666666;line-height: 40px">
                                                                                                                                <strong>Deal
                                                                                                                                    1:
                                                                                                                                </strong>
                                                                                                                                {{this.firstFormGroup.controls['promotionalMessage1'].value}}
                                                                                                                            </p>
                                                                                                                        </td>
                                                                                                                    </tr>

                                                                                                                    <tr>
                                                                                                                        <td align="center"
                                                                                                                            class="es-p5t es-p5b es-m-txt-c"
                                                                                                                            style="font-size:0">
                                                                                                                            <div
                                                                                                                                style="width: 504px; opacity: 1;border: 1px solid rgba(246,155,20,1);">
                                                                                                                            </div>
                                                                                                                        </td>
                                                                                                                    </tr>

                                                                                                                    <tr
                                                                                                                        *ngIf='this.showPromo2 == true'>
                                                                                                                        <td align="center"
                                                                                                                            class="es-m-txt-c es-p5t es-p5b">
                                                                                                                            <p
                                                                                                                                style="font-size: 20px;color: #666666;line-height: 40px">
                                                                                                                                <strong>Deal
                                                                                                                                    2:
                                                                                                                                </strong>
                                                                                                                                {{this.firstFormGroup.controls['promotionalMessage2'].value}}
                                                                                                                            </p>
                                                                                                                        </td>
                                                                                                                    </tr>

                                                                                                                    <tr
                                                                                                                        *ngIf='this.showPromo2 == true'>
                                                                                                                        <td align="center"
                                                                                                                            class="es-p5t es-p5b es-m-txt-c"
                                                                                                                            style="font-size:0">
                                                                                                                            <div
                                                                                                                                style="width: 504px;opacity: 1;border: 1px solid rgba(246,155,20,1);">
                                                                                                                            </div>
                                                                                                                        </td>
                                                                                                                    </tr>

                                                                                                                    <tr
                                                                                                                        *ngIf='filePath != null'>
                                                                                                                        <td width="558"
                                                                                                                            align="left">
                                                                                                                            <table
                                                                                                                                cellpadding="0"
                                                                                                                                cellspacing="0"
                                                                                                                                width="100%"
                                                                                                                                role="presentation"
                                                                                                                                style=" margin-top: 10px; margin-bottom: 10px;">
                                                                                                                                <tr>
                                                                                                                                    <td align="center"
                                                                                                                                        class="es-p15r"
                                                                                                                                        style="font-size: 0px">
                                                                                                                                        <a target="_blank"
                                                                                                                                            href="https://viewstripo.email">
                                                                                                                                            <img align="center"
                                                                                                                                                border="0"
                                                                                                                                                src="{{filePath}}"
                                                                                                                                                alt="Embedded Image"
                                                                                                                                                title="Image"
                                                                                                                                                style="outline: none;text-decoration: none;-ms-interpolation-mode: bicubic;clear: both;display: inline-block !important;border: none;height: auto;float: none;width: 75%;" />
                                                                                                                                        </a>
                                                                                                                                    </td>
                                                                                                                                </tr>
                                                                                                                            </table>
                                                                                                                        </td>
                                                                                                                    </tr>

                                                                                                                    <tr>
                                                                                                                        <td align="center"
                                                                                                                            class="es-p10t es-p20b es-p40r es-p40l">
                                                                                                                            <p style="padding: 5px;"
                                                                                                                                [innerHTML]="this.firstFormGroup.controls['occasionHTML'].value">
                                                                                                                            </p>
                                                                                                                        </td>
                                                                                                                    </tr>
                                                                                                                    <tr>
                                                                                                                        <td align="center"
                                                                                                                            class="es-p5t es-p5b es-m-txt-c"
                                                                                                                            style="font-size:0">
                                                                                                                            <div
                                                                                                                                style="width: 504px; opacity: 1;border: 1px solid rgba(246,155,20,1);">
                                                                                                                            </div>
                                                                                                                        </td>
                                                                                                                    </tr>
                                                                                                                    <tr>
                                                                                                                        <td align="center"
                                                                                                                            class="es-m-txt-c es-p5t es-p5b">
                                                                                                                            <p
                                                                                                                                style="font-size: 20px;color: #666666;line-height: 40px">
                                                                                                                                <strong>Valid
                                                                                                                                    UpTo
                                                                                                                                    :
                                                                                                                                </strong>
                                                                                                                                {{this.firstFormGroup.controls['offerEndDate'].value
                                                                                                                                |
                                                                                                                                date:
                                                                                                                                'dd
                                                                                                                                MMM,
                                                                                                                                YYYY'}}
                                                                                                                                <br>
                                                                                                                                <strong>Redeemable
                                                                                                                                    At:
                                                                                                                                </strong>{{selectedRedemtionOption}}
                                                                                                                            </p>
                                                                                                                        </td>
                                                                                                                    </tr>
                                                                                                                </table>
                                                                                                            </td>
                                                                                                        </tr>
                                                                                                    </table>
                                                                                                </td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td class="es-p10t es-p40b es-p40r es-p40l"
                                                                                                    align="center">
                                                                                                    <table
                                                                                                        cellpadding="0"
                                                                                                        align="center"
                                                                                                        cellspacing="0"
                                                                                                        width="100%"
                                                                                                        style="margin-bottom: 15px;">
                                                                                                        <tr>
                                                                                                        <tr>
                                                                                                            <td width="518"
                                                                                                                align="center"
                                                                                                                valign="top">
                                                                                                                <table
                                                                                                                    cellpadding="0"
                                                                                                                    align="center"
                                                                                                                    cellspacing="0"
                                                                                                                    width="100%"
                                                                                                                    role="presentation">
                                                                                                                    <tr>
                                                                                                                        <img align="center"
                                                                                                                            border="0"
                                                                                                                            src="http://ho.hitechprojects.co.in:8100/assets/img/companylogo.png"
                                                                                                                            alt="Embedded Image"
                                                                                                                            title="Image"
                                                                                                                            style="margin-left:33%;outline: none; text-decoration: none; -ms-interpolation-mode: bicubic; clear: both; display: inline-block !important; border: none; height: auto; float: none; width: 30%; " />
                                                                                                                    </tr>
                                                                                                                </table>
                                                                                                            </td>
                                                                                                        </tr>
                                                                                                    </table>
                                                                                                </td>
                                                                                            </tr>
                                                                                        </table>
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                            <table cellpadding="0" cellspacing="0"
                                                                                class="es-content" align="center">
                                                                                <tr>
                                                                                    <td class="es-info-area"
                                                                                        align="center">
                                                                                        <table class="es-content-body"
                                                                                            align="center"
                                                                                            cellpadding="0"
                                                                                            cellspacing="0" width="600"
                                                                                            style="background-color: #DAE8EE; border-bottom: 1px solid #4c8aa7; border-left: 1px solid #4c8aa7; border-right: 1px solid #4c8aa7;">
                                                                                            <tr>
                                                                                                <td class="es-p20"
                                                                                                    align="left">
                                                                                                    <table
                                                                                                        cellpadding="0"
                                                                                                        cellspacing="0"
                                                                                                        width="100%">
                                                                                                        <tr>
                                                                                                            <td width="560"
                                                                                                                align="center"
                                                                                                                valign="top">
                                                                                                                <table
                                                                                                                    cellpadding="0"
                                                                                                                    cellspacing="0"
                                                                                                                    width="100%"
                                                                                                                    role="presentation">
                                                                                                                    <tr>
                                                                                                                        <td align="center"
                                                                                                                            class="es-infoblock"
                                                                                                                            style="padding:0px 20px 0px 20px">
                                                                                                                            <p
                                                                                                                                style=" color: #999999; line-height: 120%; font-size: 12px;">
                                                                                                                                We
                                                                                                                                have
                                                                                                                                sent
                                                                                                                                you
                                                                                                                                this
                                                                                                                                email
                                                                                                                                because
                                                                                                                                you
                                                                                                                                provided
                                                                                                                                us
                                                                                                                                with
                                                                                                                                your
                                                                                                                                email
                                                                                                                                address
                                                                                                                                as
                                                                                                                                part
                                                                                                                                of
                                                                                                                                the
                                                                                                                                signup
                                                                                                                                process
                                                                                                                                on
                                                                                                                                <a target="_blank"
                                                                                                                                    style="color: #00a8e2;"
                                                                                                                                    href="https://viewstripo.email">revords.com</a>
                                                                                                                                <br>
                                                                                                                                <br>Revords&nbsp;LLC
                                                                                                                                <br>
                                                                                                                                657
                                                                                                                                Kathy
                                                                                                                                Ln
                                                                                                                                Schaumburg
                                                                                                                                IL
                                                                                                                                60173
                                                                                                                            </p>
                                                                                                                            <p
                                                                                                                                style="color: #999999; line-height: 120%; font-size: 12px; ">
                                                                                                                                Don’t
                                                                                                                                want
                                                                                                                                to
                                                                                                                                receive
                                                                                                                                emails
                                                                                                                                from
                                                                                                                                0?
                                                                                                                                |
                                                                                                                                <a href=""
                                                                                                                                    target="_blank"
                                                                                                                                    style="text-decoration: none; color: #00a8e2; line-height: 120%; font-size: 12px;">Unsubscribe</a>
                                                                                                                            </p>
                                                                                                                        </td>
                                                                                                                    </tr>
                                                                                                                </table>
                                                                                                            </td>
                                                                                                        </tr>
                                                                                                    </table>
                                                                                                </td>
                                                                                            </tr>
                                                                                        </table>
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                        </td>
                                                                    </tr>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div>
                                                <button matStepperNext class="btn btn-dark flexcenter">
                                                    Next <img alt="phonevector" class="filter-green ml3"
                                                        src="../../../../assets/img/icons/Next.svg"></button>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="col-md-4"
                                        style="border:1px solid #DADCDC;border-radius: 15px; height: 826px;">
                                        <div class="row">
                                            <div class="left-side">
                                                <div class="center-div">
                                                    <mat-tab-group mat-stretch-tabs>
                                                        <img src="assets/promotion/SMS.svg" class="md-accent">
                                                        <mat-tab *ngIf='packageDetails.isSms == true' class="tabs">
                                                            <ng-template mat-tab-label>
                                                                <img alt="phonevector" class="phonevector"
                                                                    src="../../../../assets/promotion/textSMS.svg"
                                                                    style="height: 30px;width: 27px;">
                                                                <span class="ml-1">SMS</span>
                                                            </ng-template>
                                                            <div class="campaign-template-preview">
                                                                <div class="template-email-root">
                                                                    <img alt="phonevector" class="phonevector"
                                                                        src="../../../../assets/images/phonevector.svg">
                                                                    <div class="wrapper">
                                                                        <div style="text-align: center;">
                                                                            <div class="header">
                                                                                <img alt="phonevector"
                                                                                    src="../../../../assets/images/rewords.png">
                                                                            </div>
                                                                        </div>
                                                                        <div class="content">
                                                                            <p style="white-space:pre-wrap;"
                                                                                [innerHTML]="messageString"></p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </mat-tab>
                                                        <mat-tab *ngIf='packageDetails.isMms == true'>
                                                            <ng-template mat-tab-label>
                                                                <img alt="phonevector" class="phonevector"
                                                                    src="../../../../assets/promotion/MMS.svg">
                                                                <span class="ml-1">MMS</span>
                                                            </ng-template>
                                                            <div class="campaign-template-preview">
                                                                <div class="template-email-root">
                                                                    <img alt="phonevector" class="phonevector"
                                                                        src="../../../../assets/images/phonevector.svg">
                                                                    <div class="wrapper">
                                                                        <div style="text-align: center;">
                                                                            <div class="header">
                                                                                <img alt="phonevector"
                                                                                    src="../../../../assets/images/rewords.png">
                                                                            </div>
                                                                        </div>
                                                                        <div class="content"
                                                                            *ngIf="isValidPromoMSG1 && isValidPromoMSG2 && isValidOcassion">
                                                                            <div
                                                                                style="display: flex;margin-bottom: 7px;align-items: center;">
                                                                                <img src={{filePath}}
                                                                                    style="width: 207px;" />
                                                                            </div>
                                                                            <p style="white-space:pre-wrap;"
                                                                                [innerHTML]="messageString"></p>
                                                                        </div>
                                                                        <div class="content"
                                                                            *ngIf="!isValidPromoMSG1 || !isValidPromoMSG2 || !isValidOcassion">
                                                                            <div
                                                                                style="display: flex;margin-bottom: 7px;align-items: center;">
                                                                                <img src={{filePath}}
                                                                                    style="width: 207px;" />
                                                                            </div>
                                                                            <p style="white-space:pre-wrap;"
                                                                                [innerHTML]="messageString"></p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </mat-tab>
                                                        <mat-tab *ngIf='packageDetails.isEmail == true'>
                                                            <ng-template mat-tab-label>
                                                                <img alt="phonevector" class="phonevector"
                                                                    src="../../../../assets/promotion/Email.svg">
                                                                <span class="ml-1">Email</span>
                                                            </ng-template>
                                                            <div class="campaign-template-preview">
                                                                <div class="template-email-root">
                                                                    <img alt="phonevector" class="phonevector"
                                                                        src="../../../../assets/images/phonevector.svg">
                                                                    <div class="wrapper">
                                                                        <div
                                                                            style="display: flex;justify-content: center;align-items: center;height: 445px;">
                                                                            <button type="button"
                                                                                class="btn btn-success"
                                                                                data-toggle="modal"
                                                                                data-target="#myModal">Preview</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </mat-tab>
                                                        <mat-tab>
                                                            <ng-template mat-tab-label>
                                                                <img alt="phonevector" class="phonevector"
                                                                    src="../../../../assets/promotion/POS.svg">
                                                                <span class="ml-1">POS</span>
                                                            </ng-template>
                                                            <div class="cashier preview" style="text-align: center;">
                                                                <img src="../../../../assets/images/preview-pos.png"
                                                                    style="width: 360px;" />
                                                                <div class="message-content">
                                                                    <div>
                                                                        <div>
                                                                            {{this.firstFormGroup.controls['promotionalMessage1'].value}}
                                                                        </div>
                                                                        <div *ngIf='showPromo2 == true'>
                                                                            {{this.firstFormGroup.controls['promotionalMessage2'].value}}
                                                                        </div>
                                                                        <div>
                                                                            Exp.
                                                                            {{this.firstFormGroup.controls['offerEndDate'].value|
                                                                            date: 'dd MMM, YYYY'}}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </mat-tab>
                                                        <mat-tab *ngIf='packageDetails.isNotification == true'>
                                                            <ng-template mat-tab-label>
                                                                <img alt="phonevector" class="phonevector"
                                                                    src="../../../../assets/promotion/Mobile-App.svg">
                                                                <span class="ml-1">Mobile-App</span>
                                                            </ng-template>
                                                            <div class="campaign-template-preview">
                                                                <div class="template-email-root">
                                                                    <img alt="phonevector" class="phonevector"
                                                                        src="../../../../assets/images/phonevector.svg">
                                                                    <div class="wrapper">
                                                                        <div
                                                                            style="background: #486673;color: white;padding: 10px;border-radius: 10px;">
                                                                            <p
                                                                                style="padding-bottom: 0px !important;margin-bottom: 0px !important;">
                                                                                {{businessGroupName}} sent you a
                                                                                promotion
                                                                                valid till
                                                                                {{this.firstFormGroup.controls['offerEndDate'].value|
                                                                                date: 'dd MMM,
                                                                                YYYY'}}
                                                                            </p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </mat-tab>
                                                    </mat-tab-group>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </mat-step>
                            <mat-step [stepControl]="spinFormGroup" *ngIf='enableSpinwheelStep'
                                errorMessage="SpinWheel details are required.">
                                <ng-template matStepLabel>Configure Spin wheel</ng-template>
                                <p *ngIf="errorMessageSpinWheel"> {{errorMessageSpinWheel}}</p>
                                <form [formGroup]="firstFormGroup">
                                    <div class="row" style="margin-top: 2%;margin-bottom: 1%;">
                                        <div class="col-md-6 text-center"></div>
                                        <div class="col-md-1 text-center"><b> Show in : </b></div>
                                        <div class="col-md-3" style="display: inline-flex;    align-items: center;">
                                            <span>Single Visit</span>
                                            <label class="switch"
                                                style="margin-left: 5px;margin-right: 5px;margin-bottom: 0;">
                                                <input type="checkbox" formControlName="isSpinMulti">
                                                <span class="slider round"></span>
                                                <span class="texter" style="visibility: hidden !important;"></span>
                                            </label>
                                            <span>Multiple Visits</span>
                                        </div>
                                        <div class="col-md-2"
                                            style="margin-left: -14px; display: inline-flex; align-items: center; justify-content: end;">
                                            <button class="btn btn-success text-center" (click)="resetSpinWheelData()">
                                                <i class="fa fa-refresh" aria-hidden="true">
                                                    Reset
                                                </i>
                                            </button>
                                        </div>
                                    </div>
                                </form>
                                <div class="row">
                                    <div class="col-lg-12" style="display: inline-flex; margin-bottom:10px;">
                                        <div class="col-lg-6">
                                            <div style="display: flex; justify-content: center; align-items: center">
                                                <div class="container glowing">
                                                    <div class="one">
                                                        <span
                                                            style="position: absolute;background: #C8D92B;width: 100%;height: 31%;top: 0%;
                                                                        box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset; ">
                                                        </span>
                                                        <span
                                                            style="position: absolute;background: #EFFF57;width: 100%;height: 28%;top: 26%;border-radius: 70%;
                                                                        display: flex;justify-content: center;align-items: end;">
                                                            <p
                                                                style="color: #403d3d;font-weight: 800;font-size: 14px; text-transform: uppercase; width: 50%;">
                                                                {{this.spinFormGroup.controls[0].controls['text'].value}}
                                                            </p>
                                                        </span>
                                                        <span
                                                            style="position: absolute;background: #FFEDA4;width: 100%; height: 28%;top: 56%;">
                                                        </span>
                                                    </div>
                                                    <div class="two">
                                                        <span
                                                            style="position: absolute;background: #A51E1E;width: 100%;height: 31%;top: 0%;
                                                                        box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset;">
                                                        </span>
                                                        <span
                                                            style="position: absolute;background: #FCA1A1;width: 100%;height: 28%;top: 26%;border-radius: 70%;
                                                                        display: flex;justify-content: center;align-items: end;">
                                                            <p
                                                                style="color: #403d3d;font-weight: 800;font-size: 14px; text-transform: uppercase; width: 50%;">
                                                                {{this.spinFormGroup.controls[7].controls['text'].value}}
                                                            </p>
                                                        </span>
                                                        <span
                                                            style="position: absolute;background: #F8D0D0;width: 100%;height: 28%;top: 56%;">
                                                        </span>
                                                    </div>
                                                    <div class="three">
                                                        <span
                                                            style="position: absolute;background: #3397F1;width: 100%;height: 31%;top: 0%;
                                                                        box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset;">
                                                        </span>
                                                        <span
                                                            style="position: absolute;background: #95CDFF;width: 100%;height: 28%;top: 26%;border-radius: 70%;
                                                                        display: flex;justify-content: center;align-items: end;">
                                                            <p
                                                                style="color: #403d3d;font-weight: 800;font-size: 14px; text-transform: uppercase; width: 50%;">
                                                                {{this.spinFormGroup.controls[6].controls['text'].value}}
                                                            </p>
                                                        </span>
                                                        <span
                                                            style="position: absolute;background: #C3E3FF;width: 100%;height: 28%;top: 56%;">
                                                        </span>
                                                    </div>
                                                    <div class="four">
                                                        <span
                                                            style="position: absolute;background: #595BFA;width: 100%;height: 31%;top: 0%;
                                                                        box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset;">
                                                        </span>
                                                        <span
                                                            style="position: absolute;background: #9394FF;width: 100%;height: 28%;top: 26%;border-radius: 70%;
                                                                            display: flex;justify-content: center;align-items: end;">
                                                            <p
                                                                style="color: #403d3d;font-weight: 800;font-size: 14px; text-transform: uppercase; width: 50%;">
                                                                {{this.spinFormGroup.controls[5].controls['text'].value}}
                                                            </p>
                                                        </span>
                                                        <span
                                                            style="position: absolute;background: #BABBFF;width: 100%;height: 28%;top: 56%;">
                                                        </span>
                                                    </div>
                                                    <div class="five">
                                                        <span
                                                            style="position: absolute;background: #FFA9E9;width: 100%;height: 31%;top: 0%;
                                                                        box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset;">
                                                        </span>
                                                        <span
                                                            style="position: absolute;background: #FFC9F1;width: 100%;height: 28%;top: 26%;border-radius: 70%;
                                                                          display: flex;justify-content: center;align-items: end;">
                                                            <p
                                                                style="color: #403d3d;font-weight: 800;font-size: 14px; text-transform: uppercase; width: 50%;">
                                                                {{this.spinFormGroup.controls[4].controls['text'].value}}
                                                            </p>
                                                        </span>
                                                        <span
                                                            style="position: absolute;background: #FFE0F7;width: 100%;height: 28%;top: 56%;">
                                                        </span>
                                                    </div>
                                                    <div class="six">
                                                        <span
                                                            style="position: absolute;background: #F1592B;width: 100%;height: 31%;top: 0%;
                                                                        box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset;">
                                                        </span>
                                                        <span
                                                            style="position: absolute;background: #FF906F;width: 100%;height: 28%;top: 26%;border-radius: 70%;
                                                                            display: flex;justify-content: center;align-items: end;">
                                                            <p
                                                                style="color: #403d3d;font-weight: 800;font-size: 14px; text-transform: uppercase; width: 50%;">
                                                                {{this.spinFormGroup.controls[3].controls['text'].value}}
                                                            </p>
                                                        </span>
                                                        <span
                                                            style="position: absolute;background: #FFB7A1;width: 100%;height: 28%;top: 56%;">
                                                        </span>
                                                    </div>
                                                    <div class="seven">
                                                        <span
                                                            style="position: absolute;background: #F59130;width: 100%;height: 31%;top: 0%;
                                                                        box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset;">
                                                        </span>
                                                        <span style="position: absolute;background: #FFB56D;width: 100%;height: 28%;top: 26%;border-radius: 70%;display: flex;
                                                                        justify-content: center;align-items: end;">
                                                            <p
                                                                style="color: #403d3d;font-weight: 800;font-size: 14px; text-transform: uppercase; width: 50%;">
                                                                {{this.spinFormGroup.controls[2].controls['text'].value}}
                                                            </p>
                                                        </span>
                                                        <span
                                                            style="position: absolute;background: #FFCD9C;width: 100%;height: 28%;top: 56%;">
                                                        </span>
                                                    </div>
                                                    <div class="eight">
                                                        <span
                                                            style="position: absolute;background: #FDD843;width: 100%;height: 31%;top: 0%;
                                                                        box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset;">
                                                        </span>
                                                        <span
                                                            style="position: absolute;background: #FFE57A;width: 100%;height: 28%;top: 26%;border-radius: 70%;
                                                                            display: flex;justify-content: center;align-items: end;">
                                                            <p
                                                                style="color: #403d3d;font-weight: 800;font-size: 14px; text-transform: uppercase; width: 50%;">
                                                                {{this.spinFormGroup.controls[1].controls['text'].value}}
                                                            </p>
                                                        </span>
                                                        <span
                                                            style="position: absolute;background: #FFEDA4;width: 100%;height: 28%;top: 56%;">
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <form [formGroup]="spinFormGroup">
                                                <table class="table table-bordered" style="width: 100%">
                                                    <thead>
                                                        <tr>
                                                            <th scope="col text-center">Index</th>
                                                            <th scope="col">Arc Name</th>
                                                            <th scope="col text-center">Probability</th>
                                                            <th scope="col text-center">Points</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let option of spinWheelControls; let i=index"
                                                            [formGroupName]="i">
                                                            <td style="text-align: center;vertical-align: middle;">
                                                                {{i + 1}}
                                                            </td>
                                                            <td>
                                                                <input class="form-control" type="text"
                                                                    formControlName="text"
                                                                    (keyup)="onEventLog('arcText',$event,i)"
                                                                    (keypress)="numberOnly('arcText',$event,i)"
                                                                    maxlength="15" style="float: left;width:90%;" />
                                                                <p class="text-center" style="float:right;color: green;font-weight: 600;width:10%;height: 38px;
                                                                    margin-bottom: 0;padding-bottom: 0;">
                                                                    {{indexwiseCharacters[i].length}}</p>
                                                                <div style="float: left;width:100%;"
                                                                    *ngIf="submitted && spinFormGroup.controls[i].controls['text'].errors"
                                                                    class="invalid-feedback">
                                                                    <div
                                                                        *ngIf="spinFormGroup.controls[i].controls['text'].errors['required']">
                                                                        Arc Text is required
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td style="text-align: center;vertical-align: middle;">
                                                                <input class="form-control" type="number"
                                                                    formControlName="Probability"
                                                                    (keypress)="numberOnly('probability',$event,i)"
                                                                    (keyup)="onEventLog('probability',$event,i)"
                                                                    (change)="onEventLog('probability',$event,i)"
                                                                    min="0" />
                                                                <div style="width:100%;"
                                                                    *ngIf="submitted && spinFormGroup.controls[i].controls['Probability'].errors"
                                                                    class="invalid-feedback">
                                                                    <div
                                                                        *ngIf="spinFormGroup.controls[i].controls['Probability'].errors['required']">
                                                                        Probability is required
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td style="text-align: center;vertical-align: middle;">
                                                                <input type="checkbox" formControlName="IsInteger"
                                                                    (change)="onEventLog('IsPoints',$event,i)" />
                                                            </td>
                                                        </tr>
                                                        <tr formGroupName="0">
                                                            <td style="width: 5%;"></td>
                                                            <td style="width: 60%;">
                                                                <div style="width:100%;"
                                                                    *ngIf="submitted && spinFormGroup.controls[0].controls['totalPoints'].errors"
                                                                    class="invalid-feedback">
                                                                    <div
                                                                        *ngIf="spinFormGroup.controls[0].controls['totalPoints'].errors['min'] ||
                                                                    spinFormGroup.controls[0].controls['totalPoints'].errors['max']">
                                                                        Total Probability must be equal to 100
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td style="width: 15%;">
                                                                <input class="form-control" type="number"
                                                                    formControlName="totalPoints" readonly>
                                                            </td>
                                                            <td style="width: 10%;"></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-2">
                                        <button matStepperPrevious class="btn btn-dark flexcenter"> <img
                                                alt="phonevector" class="filter-green mr3"
                                                src="../../../../assets/img/icons/Back.svg">Back</button>
                                    </div>
                                    <div class="col-md-2">
                                        <button matStepperNext class="btn btn-dark flexcenter">Next
                                            <img alt="phonevector" class="filter-green ml3"
                                                src="../../../../assets/img/icons/Next.svg"></button>
                                    </div>
                                    <div class="col-md-10"></div>
                                </div>
                            </mat-step>
                            <mat-step [stepControl]="secondFormGroup"
                                errorMessage="Business and Customers are required.">
                                <ng-template matStepLabel>Step 2</ng-template>
                                <div class="row d-flex">

                                    <div class="col-md-12">
                                        <form [formGroup]="secondFormGroup">
                                            <div class="row flexcenter">
                                                <div class="col-md-2">
                                                    <b>Redeemable At : </b>
                                                </div>
                                                <div class="col-md-4">
                                                    <ng-multiselect-dropdown placeholder="Choose Redeemable At"
                                                        (onSelect)="onRedemptionOptionChanged()"
                                                        (onSelectAll)="onRedemptionOptionChanged()"
                                                        formControlName="RedemptionAt"
                                                        [settings]="dropdownSettingsSingle"
                                                        (onDeSelect)="onRedemptionOptionChanged()"
                                                        (onDeSelectAll)="onRedemptionOptionChanged()"
                                                        [data]="bussinessDataForRedemption"
                                                        [ngClass]="{ 'is-invalid': submitted && secondFormGroup.controls['RedemptionAt'].errors }">
                                                    </ng-multiselect-dropdown>
                                                    <div *ngIf="submitted && secondFormGroup.controls['RedemptionAt'].errors"
                                                        class="invalid-feedback">
                                                        <div
                                                            *ngIf="secondFormGroup.controls['RedemptionAt'].errors['required']">
                                                            Redeemable At is required
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mt-2">
                                                <div class="col-md-2"></div>
                                                <div class="col-md-10">

                                                </div>
                                            </div>
                                        </form>
                                    </div>

                                    <div class="row d-flex">
                                        <div class="col-md-5 tagsDiv">
                                            <div class="ml-2">
                                                <img src="../../../../assets/promotion/Member of.svg">
                                                <span class="ml-2">
                                                    <b>Members Of</b>
                                                </span>
                                            </div>

                                            <div class="mt-2"
                                                *ngIf="submitted && secondFormGroup.controls['membersOf'].errors"
                                                class="invalid-feedback">
                                                <div *ngIf="secondFormGroup.controls['membersOf'].errors['required']">
                                                    Members of is required
                                                </div>
                                            </div>
                                            <mat-checkbox class="example-margin mt-2" [checked]="isAllChecked"
                                                (click)="selectAllBusiness()" color="#7DA3BA">Select All</mat-checkbox>
                                            <div *ngFor="let b of bussinessDataForStep3">
                                                <mat-checkbox *ngIf="b.id != -1" color="#7DA3BA" class="example-margin"
                                                    [value]="b.id" [checked]="b.checked"
                                                    (click)="onBusinessSelected(b.id)">
                                                    {{b.businessName}}
                                                    <span class="itemSpan">
                                                        (Up to {{b.memberCount}} Customers)
                                                    </span>
                                                </mat-checkbox>
                                            </div>
                                        </div>

                                        <div class="col-md-3 tagsDiv">
                                            <div class="ml-2">
                                                <img src="../../../../assets/promotion/Total Badges.svg">
                                                <span class="ml-2">
                                                    <b>Total badges</b>
                                                </span>
                                            </div>
                                            <div class="mt-2" class="invalid-feedback"
                                                *ngIf="submitted && secondFormGroup.controls['sendToCustomers'].errors">
                                                <div
                                                    *ngIf="secondFormGroup.controls['sendToCustomers'].errors['required']">
                                                    Customers are required (Badges or Tags)
                                                </div>
                                            </div>
                                            <div>
                                                <mat-checkbox class="example-margin mt-2" [checked]="isAllBadgeChecked"
                                                    (click)="selectAllBadges()" color="#7DA3BA">Select
                                                    All</mat-checkbox>
                                                <div *ngFor="let b of badgeDataForStep3">
                                                    <mat-checkbox color="#7DA3BA" class="example-margin" [value]="b.id"
                                                        [checked]="b.checked" (click)="onBadgeSelected(b.id)">
                                                        {{b.badgeName}}<span class="itemSpan">(Up to {{b.counts}}
                                                            Customers)</span>
                                                    </mat-checkbox>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-3 tagsDiv">
                                            <div class="ml-2">
                                                <img src="../../../../assets/promotion/Total Tags.svg">
                                                <span class="ml-2">
                                                    <b>Total Tags</b>
                                                    <i class="icon-fs-info ng-scope" [ngbTooltip]="negativeFlagTooltip">
                                                    </i>
                                                </span>
                                            </div>
                                            <div>
                                                <mat-checkbox class="example-margin mt-2" [checked]="isAllTagChecked"
                                                    (click)="selectAllTags()" color="#7DA3BA">Select All</mat-checkbox>
                                                <div *ngFor="let b of tagDataForStep3">
                                                    <mat-checkbox color="#7DA3BA" class="example-margin" [value]="b.id"
                                                        [checked]="b.checked" (click)="onTagSelected(b.id)">
                                                        {{b.tagName}} <span class="itemSpan">(Up to {{b.counts}}
                                                            Customers)</span>
                                                    </mat-checkbox>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row" style="margin-top:5px;">
                                </div>

                                <div class="row d-flex" *ngIf="lastSmsSentDate != null">
                                    <div class="row d-flex">
                                        <div class="col-md-5 tagsDiv" style="background: #f4f8fb;">
                                            <p>
                                                The Last Promotion was sent on {{lastSmsSentDate | date:'M/d'}}. To
                                                prevent members from
                                                experiencing displeasure,
                                                those who have received that SMS promotion will not receive any
                                                new SMS promotion
                                                until {{smsTillDate | date:'M/d'}}. All members opted in via app or
                                                email will still
                                                receive this promotion.
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <div class="row" style="margin-top:5px;" *ngIf="lastSmsSentDate != null">
                                </div>

                                <div class="row d-flex">
                                    <div class="row d-flex">
                                        <div class="col-md-5 tagsDiv">
                                            <p>
                                                Total <b> {{totalDelivered}}</b> customers will get app
                                                notification, email or text sms.
                                            </p>
                                            <div class="row" style="margin-top:5px;">
                                                <div class="col-md-12">
                                                    <table class="table">
                                                        <thead>
                                                            <tr>
                                                                <th scope="col">Mobile App</th>
                                                                <th scope="col">Email</th>
                                                                <th scope="col">SMS</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>{{notificationCount}}</td>
                                                                <td>{{emailCount}}</td>
                                                                <td>{{smsCount}}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row" style="margin-top:5px;">
                                </div>

                                <div class="row">
                                    <div class="col-md-2">
                                        <button matStepperPrevious class="btn btn-dark flexcenter"><img
                                                alt="phonevector" class="filter-green mr3"
                                                src="../../../../assets/img/icons/Back.svg">Back</button>
                                    </div>
                                    <div class="col-md-2">
                                        <button matStepperNext class="btn btn-dark flexcenter">Next
                                            <img alt="phonevector" class="filter-green ml3"
                                                src="../../../../assets/img/icons/Next.svg">
                                        </button>
                                    </div>
                                    <div class="col-md-10"></div>
                                </div>
                            </mat-step>
                            <mat-step>
                                <ng-template matStepLabel>Step 3</ng-template>
                                <div class="row">
                                    <div class="col-md-8">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <mat-accordion class="example-headers-align" multi>
                                                    <mat-expansion-panel [expanded]="true">
                                                        <mat-expansion-panel-header>
                                                            <mat-panel-title class="head"
                                                                *ngIf="firstFormGroup.controls['MuliplePromo'].value == false">
                                                                Promotion Details
                                                            </mat-panel-title>
                                                            <mat-panel-title class="head"
                                                                *ngIf="firstFormGroup.controls['MuliplePromo'].value == true">
                                                                Promotion 1 Details
                                                            </mat-panel-title>
                                                        </mat-expansion-panel-header>
                                                        <table class="table table-borderless margin7">
                                                            <tbody>
                                                                <tr>
                                                                    <th style="width:30%;color: #7DA3BA;">
                                                                        <label
                                                                            *ngIf="firstFormGroup.controls['MuliplePromo'].value == false">
                                                                            Promotion :
                                                                        </label>
                                                                        <label
                                                                            *ngIf="firstFormGroup.controls['MuliplePromo'].value == true">
                                                                            Promotion 1 :
                                                                        </label>
                                                                    </th>
                                                                    <td style="width: 70%;" colspan="3">
                                                                        {{this.firstFormGroup.controls['promotionalMessage1'].value}}
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <th style="width:20%;">
                                                                        <img src="../../../../assets/img/icons/Is redeemable.svg"
                                                                            class="margin55">
                                                                        <label>Is Redeemable? : </label>
                                                                    </th>
                                                                    <td style="width: 10%;">
                                                                        {{this.firstFormGroup.controls['isRedeemable1'].value
                                                                        == true ? 'Yes' : 'No'}}
                                                                    </td>
                                                                    <td style="width:20%;" *ngIf="isSpinRequired">
                                                                        <img src="../../../../assets/img/icons/Allow spin wheel.svg"
                                                                            class="margin55">
                                                                        <label>
                                                                            <b> Spinwheel? : </b>
                                                                        </label>
                                                                    </td>
                                                                    <td style="width: 10%;" *ngIf="isSpinRequired">
                                                                        {{this.firstFormGroup.controls['isSpinWheelAllowed1'].value
                                                                        ? 'Yes' : 'No'}}
                                                                    </td>
                                                                    <th style="width:30%;">
                                                                        <img src="../../../../assets/img/icons/Turn on word of mouth.svg"
                                                                            class="margin55">
                                                                        <label>Word of Mouth? : </label>
                                                                    </th>
                                                                    <td style="width: 10%;">
                                                                        {{this.firstFormGroup.controls['isWordOfMouth1'].value
                                                                        ? 'Yes' : 'No'}}
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </mat-expansion-panel>
                                                </mat-accordion>
                                            </div>
                                        </div>
                                        <div class="row" style="margin-top:5px;"
                                            *ngIf="firstFormGroup.controls['MuliplePromo'].value == true">
                                            <div class="col-md-12">
                                                <mat-accordion class="example-headers-align" multi>
                                                    <mat-expansion-panel [expanded]="true">
                                                        <mat-expansion-panel-header>
                                                            <mat-panel-title class="head">
                                                                Promotion 2 Details
                                                            </mat-panel-title>
                                                        </mat-expansion-panel-header>
                                                        <table class="table table-borderless margin7">
                                                            <tbody>
                                                                <tr>
                                                                    <th style="width:30%;color: #7DA3BA;">
                                                                        <label>Promotion 2 : </label>
                                                                    </th>
                                                                    <td style="width: 70%;" colspan="3">
                                                                        {{this.firstFormGroup.controls['promotionalMessage2'].value}}
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <th style="width:20%;">
                                                                        <img src="../../../../assets/img/icons/Is redeemable.svg"
                                                                            class="margin55">
                                                                        <label>Is Redeemable? : </label>
                                                                    </th>
                                                                    <td style="width: 10%;">
                                                                        {{this.firstFormGroup.controls['isRedeemable2'].value
                                                                        ? 'Yes' : 'No'}}
                                                                    </td>
                                                                    <td style="width:20%;">
                                                                        <img src="../../../../assets/img/icons/Allow spin wheel.svg"
                                                                            class="margin55">
                                                                        <label>
                                                                            <b> Spinwheel? : </b>
                                                                        </label>
                                                                    </td>
                                                                    <td style="width: 10%;">
                                                                        {{this.firstFormGroup.controls['isSpinWheelAllowed2'].value
                                                                        ? 'Yes' : 'No'}}
                                                                    </td>
                                                                    <th style="width:30%;">
                                                                        <img src="../../../../assets/img/icons/Turn on word of mouth.svg"
                                                                            class="margin55">
                                                                        <label>Word of Mouth? : </label>
                                                                    </th>
                                                                    <td style="width: 10%;">
                                                                        {{this.firstFormGroup.controls['isWordOfMouth2'].value
                                                                        ? 'Yes' : 'No'}}
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </mat-expansion-panel>
                                                </mat-accordion>
                                            </div>
                                        </div>
                                        <div class="row" style="margin-top:5px;">
                                            <div class="col-md-12">
                                                <mat-accordion class="example-headers-align" multi>
                                                    <mat-expansion-panel [expanded]="true">
                                                        <mat-expansion-panel-header>
                                                            <mat-panel-title class="head">
                                                                Other Details
                                                            </mat-panel-title>
                                                        </mat-expansion-panel-header>
                                                        <table class="table table-borderless margin7">
                                                            <tbody>
                                                                <tr>
                                                                    <th style="width:30%;">
                                                                        <label>Ocassion : </label>
                                                                    </th>
                                                                    <td style="width: 70%;" colspan="3"
                                                                        [innerHTML]="this.firstFormGroup.controls['occasionHTML'].value">
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <th style="width:30%;">
                                                                        <label>Offer Start Date : </label>
                                                                    </th>
                                                                    <td style="width: 20%;">
                                                                        {{this.firstFormGroup.controls['offerStartDate'].value}}
                                                                    </td>
                                                                    <td style="width:30%;">
                                                                        <label>
                                                                            <b> Offer End Date : </b>
                                                                        </label>
                                                                    </td>
                                                                    <td style="width: 20%;">
                                                                        {{this.firstFormGroup.controls['offerEndDate'].value}}
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <th style="width:30%;">
                                                                        <label>Send Now/Later? : </label>
                                                                    </th>
                                                                    <td style="width: 20%;">
                                                                        {{this.firstFormGroup.controls['isSendSoon'].value
                                                                        == 1 ? 'Now' :
                                                                        (this.firstFormGroup.controls['isSendSoon'].value
                                                                        == 2
                                                                        ? 'Later (on ' +
                                                                        this.firstFormGroup.controls['date'].value
                                                                        + ') between ' + scheduleLaterTime : '') }}
                                                                    </td>
                                                                    <th style="width:30%;">
                                                                        <label>Redeemable At : </label>
                                                                    </th>
                                                                    <td style="width: 20;">
                                                                        {{selectedRedemtionOption}}
                                                                    </td>
                                                                </tr>
                                                                <tr>

                                                                </tr>
                                                                <tr>
                                                                    <th style="width:30%;">
                                                                        <label>Members Of : </label>
                                                                    </th>
                                                                    <td style="width: 70;" colspan="3">
                                                                        {{selectedBusinessName}}
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <th style="width:30%;">
                                                                        <label>Send to : </label>
                                                                    </th>
                                                                    <td style="width: 70;" colspan="3">
                                                                        {{sendToCustomers}}
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </mat-expansion-panel>
                                                </mat-accordion>

                                                <div class="modal fade" id="myModalSummary" tabindex="-1" role="dialog"
                                                    aria-labelledby="myModalLabel" aria-hidden="true">
                                                    <div class="modal-dialog">
                                                        <div class="modal-content" style="width: 725px;">
                                                            <div class="modal-header">
                                                                <div type="button" class="close" data-dismiss="modal"
                                                                    aria-hidden="true" #closebutton>&times;</div>
                                                            </div>

                                                            <div class="modal-body">
                                                                <div class="es-wrapper-color">
                                                                    <table class="es-wrapper" width="100%"
                                                                        cellspacing="0" cellpadding="0">
                                                                        <tr>
                                                                            <td valign="top">
                                                                                <table cellpadding="0" cellspacing="0"
                                                                                    class="es-header" align="center">
                                                                                    <tr>
                                                                                        <td align="center">
                                                                                            <table
                                                                                                class="es-header-body"
                                                                                                align="center"
                                                                                                cellpadding="0"
                                                                                                cellspacing="0"
                                                                                                width="600"
                                                                                                style="background-color: transparent; border-top: 1px solid #4c8aa7;  border-left: 1px solid #4c8aa7; border-right: 1px solid #4c8aa7;">
                                                                                                <tr>
                                                                                                    <td class="es-p20"
                                                                                                        align="left"
                                                                                                        style="border-radius: 10px 10px 0px 0px;">
                                                                                                        <table
                                                                                                            cellpadding="0"
                                                                                                            cellspacing="0"
                                                                                                            width="100%">
                                                                                                            <tr>
                                                                                                                <td width="560"
                                                                                                                    class="es-m-p0r"
                                                                                                                    valign="top"
                                                                                                                    align="center">
                                                                                                                    <table
                                                                                                                        cellpadding="0"
                                                                                                                        cellspacing="0"
                                                                                                                        width="100%"
                                                                                                                        style="border-radius: 1px;border-collapse: separate"
                                                                                                                        role="presentation">
                                                                                                                        <tr>
                                                                                                                            <td align="center"
                                                                                                                                style="font-size: 0px">
                                                                                                                                <a target="_blank"
                                                                                                                                    href="https://viewstripo.email">
                                                                                                                                    <img align="center"
                                                                                                                                        border="0"
                                                                                                                                        src="../../../../assets/images/fortune.png"
                                                                                                                                        alt="Image"
                                                                                                                                        title="Image"
                                                                                                                                        style="outline: none;text-decoration: none;-ms-interpolation-mode: bicubic;clear: both;display: inline-block !important;border: none;height: auto;float: none;width: 32%;max-width: 179.2px;"
                                                                                                                                        width="179.2" />
                                                                                                                                </a>
                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                    </table>
                                                                                                                </td>
                                                                                                            </tr>
                                                                                                        </table>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            </table>
                                                                                        </td>
                                                                                    </tr>
                                                                                </table>
                                                                                <table class="es-content"
                                                                                    cellspacing="0" cellpadding="0"
                                                                                    align="center">
                                                                                    <tr>
                                                                                        <td align="center">
                                                                                            <table
                                                                                                class="es-content-body"
                                                                                                style="border-left:1px solid #4c8aa7;border-right:1px solid #4c8aa7;background-color: #ffffff"
                                                                                                width="600"
                                                                                                cellspacing="0"
                                                                                                cellpadding="0"
                                                                                                bgcolor="#ffffff"
                                                                                                align="center">
                                                                                                <tr>
                                                                                                    <td class="es-p30t es-p20r es-p20l"
                                                                                                        align="left"
                                                                                                        bgcolor="#ffffff"
                                                                                                        style="background-color: #ffffff">
                                                                                                        <table
                                                                                                            cellpadding="0"
                                                                                                            cellspacing="0"
                                                                                                            width="100%"
                                                                                                            style="margin-top: -15px;">
                                                                                                            <tr>
                                                                                                                <td class="es-m-p0r"
                                                                                                                    width="558"
                                                                                                                    valign="top"
                                                                                                                    align="center">
                                                                                                                    <table
                                                                                                                        width="100%"
                                                                                                                        cellspacing="0"
                                                                                                                        cellpadding="0"
                                                                                                                        role="presentation">
                                                                                                                        <tr
                                                                                                                            *ngIf='this.showPromo2 == false'>
                                                                                                                            <td align="center"
                                                                                                                                class="es-m-txt-c es-p5t es-p5b">
                                                                                                                                <p
                                                                                                                                    style="font-size: 20px;color: #666666;line-height: 40px">
                                                                                                                                    {{this.firstFormGroup.controls['promotionalMessage1'].value}}
                                                                                                                                </p>
                                                                                                                            </td>
                                                                                                                        </tr>

                                                                                                                        <tr
                                                                                                                            *ngIf='this.showPromo2 == true'>
                                                                                                                            <td align="center"
                                                                                                                                class="es-m-txt-c es-p5t es-p5b">
                                                                                                                                <p
                                                                                                                                    style="font-size: 20px;color: #666666;line-height: 40px">
                                                                                                                                    <strong>Deal
                                                                                                                                        1:
                                                                                                                                    </strong>
                                                                                                                                    {{this.firstFormGroup.controls['promotionalMessage1'].value}}
                                                                                                                                </p>
                                                                                                                            </td>
                                                                                                                        </tr>

                                                                                                                        <tr>
                                                                                                                            <td align="center"
                                                                                                                                class="es-p5t es-p5b es-m-txt-c"
                                                                                                                                style="font-size:0">
                                                                                                                                <div
                                                                                                                                    style="width: 504px; opacity: 1;border: 1px solid rgba(246,155,20,1);">
                                                                                                                                </div>
                                                                                                                            </td>
                                                                                                                        </tr>

                                                                                                                        <tr
                                                                                                                            *ngIf='this.showPromo2 == true'>
                                                                                                                            <td align="center"
                                                                                                                                class="es-m-txt-c es-p5t es-p5b">
                                                                                                                                <p
                                                                                                                                    style="font-size: 20px;color: #666666;line-height: 40px">
                                                                                                                                    <strong>Deal
                                                                                                                                        2:
                                                                                                                                    </strong>
                                                                                                                                    {{this.firstFormGroup.controls['promotionalMessage2'].value}}
                                                                                                                                </p>
                                                                                                                            </td>
                                                                                                                        </tr>

                                                                                                                        <tr
                                                                                                                            *ngIf='this.showPromo2 == true'>
                                                                                                                            <td align="center"
                                                                                                                                class="es-p5t es-p5b es-m-txt-c"
                                                                                                                                style="font-size:0">
                                                                                                                                <div
                                                                                                                                    style="width: 504px;opacity: 1;border: 1px solid rgba(246,155,20,1);">
                                                                                                                                </div>
                                                                                                                            </td>
                                                                                                                        </tr>

                                                                                                                        <tr
                                                                                                                            *ngIf='filePath != null'>
                                                                                                                            <td width="558"
                                                                                                                                align="left">
                                                                                                                                <table
                                                                                                                                    cellpadding="0"
                                                                                                                                    cellspacing="0"
                                                                                                                                    width="100%"
                                                                                                                                    role="presentation"
                                                                                                                                    style=" margin-top: 10px; margin-bottom: 10px;">
                                                                                                                                    <tr>
                                                                                                                                        <td align="center"
                                                                                                                                            class="es-p15r"
                                                                                                                                            style="font-size: 0px">
                                                                                                                                            <a target="_blank"
                                                                                                                                                href="https://viewstripo.email">
                                                                                                                                                <img align="center"
                                                                                                                                                    border="0"
                                                                                                                                                    src="{{filePath}}"
                                                                                                                                                    alt="Embedded Image"
                                                                                                                                                    title="Image"
                                                                                                                                                    style="outline: none;text-decoration: none;-ms-interpolation-mode: bicubic;clear: both;display: inline-block !important;border: none;height: auto;float: none;width: 75%;" />
                                                                                                                                            </a>
                                                                                                                                        </td>
                                                                                                                                    </tr>
                                                                                                                                </table>
                                                                                                                            </td>
                                                                                                                        </tr>

                                                                                                                        <tr>
                                                                                                                            <td align="center"
                                                                                                                                class="es-p10t es-p20b es-p40r es-p40l">
                                                                                                                                <p style="padding: 5px;"
                                                                                                                                    [innerHTML]="this.firstFormGroup.controls['occasionHTML'].value">
                                                                                                                                </p>
                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <td align="center"
                                                                                                                                class="es-p5t es-p5b es-m-txt-c"
                                                                                                                                style="font-size:0">
                                                                                                                                <div
                                                                                                                                    style="width: 504px; opacity: 1;border: 1px solid rgba(246,155,20,1);">
                                                                                                                                </div>
                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <td align="center"
                                                                                                                                class="es-m-txt-c es-p5t es-p5b">
                                                                                                                                <p
                                                                                                                                    style="font-size: 20px;color: #666666;line-height: 40px">
                                                                                                                                    <strong>Valid
                                                                                                                                        UpTo
                                                                                                                                        :
                                                                                                                                    </strong>
                                                                                                                                    {{this.firstFormGroup.controls['offerEndDate'].value
                                                                                                                                    |
                                                                                                                                    date:
                                                                                                                                    'dd
                                                                                                                                    MMM,
                                                                                                                                    YYYY'}}
                                                                                                                                    <br>
                                                                                                                                    <strong>Redeemable
                                                                                                                                        At:
                                                                                                                                    </strong>{{selectedRedemtionOption}}
                                                                                                                                </p>
                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                    </table>
                                                                                                                </td>
                                                                                                            </tr>
                                                                                                        </table>
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td class="es-p10t es-p40b es-p40r es-p40l"
                                                                                                        align="center">
                                                                                                        <table
                                                                                                            cellpadding="0"
                                                                                                            align="center"
                                                                                                            cellspacing="0"
                                                                                                            width="100%"
                                                                                                            style="margin-bottom: 15px;">
                                                                                                            <tr>
                                                                                                            <tr>
                                                                                                                <td width="518"
                                                                                                                    align="center"
                                                                                                                    valign="top">
                                                                                                                    <table
                                                                                                                        cellpadding="0"
                                                                                                                        align="center"
                                                                                                                        cellspacing="0"
                                                                                                                        width="100%"
                                                                                                                        role="presentation">
                                                                                                                        <tr>
                                                                                                                            <img align="center"
                                                                                                                                border="0"
                                                                                                                                src="http://ho.hitechprojects.co.in:8100/assets/img/companylogo.png"
                                                                                                                                alt="Embedded Image"
                                                                                                                                title="Image"
                                                                                                                                style="margin-left:33%;outline: none; text-decoration: none; -ms-interpolation-mode: bicubic; clear: both; display: inline-block !important; border: none; height: auto; float: none; width: 30%; " />
                                                                                                                        </tr>
                                                                                                                    </table>
                                                                                                                </td>
                                                                                                            </tr>
                                                                                                        </table>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            </table>
                                                                                        </td>
                                                                                    </tr>
                                                                                </table>
                                                                                <table cellpadding="0" cellspacing="0"
                                                                                    class="es-content" align="center">
                                                                                    <tr>
                                                                                        <td class="es-info-area"
                                                                                            align="center">
                                                                                            <table
                                                                                                class="es-content-body"
                                                                                                align="center"
                                                                                                cellpadding="0"
                                                                                                cellspacing="0"
                                                                                                width="600"
                                                                                                style="background-color: #DAE8EE; border-bottom: 1px solid #4c8aa7; border-left: 1px solid #4c8aa7; border-right: 1px solid #4c8aa7;">
                                                                                                <tr>
                                                                                                    <td class="es-p20"
                                                                                                        align="left">
                                                                                                        <table
                                                                                                            cellpadding="0"
                                                                                                            cellspacing="0"
                                                                                                            width="100%">
                                                                                                            <tr>
                                                                                                                <td width="560"
                                                                                                                    align="center"
                                                                                                                    valign="top">
                                                                                                                    <table
                                                                                                                        cellpadding="0"
                                                                                                                        cellspacing="0"
                                                                                                                        width="100%"
                                                                                                                        role="presentation">
                                                                                                                        <tr>
                                                                                                                            <td align="center"
                                                                                                                                class="es-infoblock"
                                                                                                                                style="padding:0px 20px 0px 20px">
                                                                                                                                <p
                                                                                                                                    style=" color: #999999; line-height: 120%; font-size: 12px;">
                                                                                                                                    We
                                                                                                                                    have
                                                                                                                                    sent
                                                                                                                                    you
                                                                                                                                    this
                                                                                                                                    email
                                                                                                                                    because
                                                                                                                                    you
                                                                                                                                    provided
                                                                                                                                    us
                                                                                                                                    with
                                                                                                                                    your
                                                                                                                                    email
                                                                                                                                    address
                                                                                                                                    as
                                                                                                                                    part
                                                                                                                                    of
                                                                                                                                    the
                                                                                                                                    signup
                                                                                                                                    process
                                                                                                                                    on
                                                                                                                                    <a target="_blank"
                                                                                                                                        style="color: #00a8e2;"
                                                                                                                                        href="https://viewstripo.email">revords.com</a>
                                                                                                                                    <br>
                                                                                                                                    <br>Revords&nbsp;LLC
                                                                                                                                    <br>
                                                                                                                                    657
                                                                                                                                    Kathy
                                                                                                                                    Ln
                                                                                                                                    Schaumburg
                                                                                                                                    IL
                                                                                                                                    60173
                                                                                                                                </p>
                                                                                                                                <p
                                                                                                                                    style="color: #999999; line-height: 120%; font-size: 12px;  ">
                                                                                                                                    Don’t
                                                                                                                                    want
                                                                                                                                    to
                                                                                                                                    receive
                                                                                                                                    emails
                                                                                                                                    from
                                                                                                                                    0?
                                                                                                                                    |
                                                                                                                                    <a href=""
                                                                                                                                        target="_blank"
                                                                                                                                        style="text-decoration: none; color: #00a8e2; line-height: 120%; font-size: 12px;">Unsubscribe</a>
                                                                                                                                </p>
                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                    </table>
                                                                                                                </td>
                                                                                                            </tr>
                                                                                                        </table>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            </table>
                                                                                        </td>
                                                                                    </tr>
                                                                                </table>
                                                                            </td>
                                                                        </tr>
                                                                    </table>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                        <!-- <div class="row" style="margin-top:5px;">
                                            <div class="col-md-12">
                                                <h4>{{LatestSMSstatus}} </h4>
                                                <h5>
                                                    <span
                                                        [ngClass]="(SMSStatus == 'delivered' || SMSStatus == 'sent') ? 'greendot' : 'reddot' "
                                                        [class]="greendot">
                                                    </span>{{LatestSMSstatus2}}
                                                </h5>
                                            </div>
                                        </div> -->
                                        <div class="row" style="margin-top:5px;">
                                            <div class="col-md-2">
                                                <button matStepperPrevious class="btn btn-dark flexcenter">
                                                    <img alt="phonevector" class="filter-green mr3"
                                                        src="../../../../assets/img/icons/Back.svg">Back</button>
                                            </div>
                                            <div class="col-md-4">
                                                <button class="btn btn-success flexcenter" [disabled]="isLoading"
                                                    (click)="Submit()">
                                                    Send Campaign
                                                    <img alt="phonevector" class="filter-green ml3"
                                                        src="../../../../assets/img/icons/Sand Campaign.svg">
                                                </button>
                                            </div>
                                            <div class="col-md-6"></div>
                                        </div>

                                    </div>
                                    <div class="col-md-4"
                                        style="border:1px solid #DADCDC;border-radius: 15px; height: 826px;">
                                        <div class="row">
                                            <div class="left-side">
                                                <div class="center-div">
                                                    <mat-tab-group mat-stretch-tabs>
                                                        <img src="assets/promotion/SMS.svg" class="md-accent">
                                                        <mat-tab *ngIf='packageDetails.isSms == true' class="tabs">
                                                            <ng-template mat-tab-label>
                                                                <img alt="phonevector" class="phonevector"
                                                                    src="../../../../assets/promotion/textSMS.svg"
                                                                    style="height: 30px;width: 27px;">
                                                                <span class="ml-1">SMS</span>
                                                            </ng-template>
                                                            <div class="campaign-template-preview">
                                                                <div class="template-email-root">
                                                                    <img alt="phonevector" class="phonevector"
                                                                        src="../../../../assets/images/phonevector.svg">
                                                                    <div class="wrapper">
                                                                        <div style="text-align: center;">
                                                                            <div class="header">
                                                                                <img alt="phonevector"
                                                                                    src="../../../../assets/images/rewords.png">
                                                                            </div>
                                                                        </div>
                                                                        <div class="content">
                                                                            <p style="white-space:pre-wrap;"
                                                                                [innerHTML]="messageString"></p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </mat-tab>
                                                        <mat-tab *ngIf='packageDetails.isMms == true'>
                                                            <ng-template mat-tab-label>
                                                                <img alt="phonevector" class="phonevector"
                                                                    src="../../../../assets/promotion/MMS.svg">
                                                                <span class="ml-1">MMS</span>
                                                            </ng-template>
                                                            <div class="campaign-template-preview">
                                                                <div class="template-email-root">
                                                                    <img alt="phonevector" class="phonevector"
                                                                        src="../../../../assets/images/phonevector.svg">
                                                                    <div class="wrapper">
                                                                        <div style="text-align: center;">
                                                                            <div class="header">
                                                                                <img alt="phonevector"
                                                                                    src="../../../../assets/images/rewords.png">
                                                                            </div>
                                                                        </div>
                                                                        <div class="content"
                                                                            *ngIf="isValidPromoMSG1 && isValidPromoMSG2 && isValidOcassion">
                                                                            <div
                                                                                style="display: flex;margin-bottom: 7px;align-items: center;">
                                                                                <img src={{filePath}}
                                                                                    style="width: 207px;" />
                                                                            </div>
                                                                            <p style="white-space:pre-wrap;"
                                                                                [innerHTML]="messageString"></p>
                                                                        </div>
                                                                        <div class="content"
                                                                            *ngIf="!isValidPromoMSG1 || !isValidPromoMSG2 || !isValidOcassion">
                                                                            <div
                                                                                style="display: flex;margin-bottom: 7px;align-items: center;">
                                                                                <img src={{filePath}}
                                                                                    style="width: 207px;" />
                                                                            </div>
                                                                            <p style="white-space:pre-wrap;"
                                                                                [innerHTML]="messageString"></p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </mat-tab>
                                                        <mat-tab *ngIf='packageDetails.isEmail == true'>
                                                            <ng-template mat-tab-label>
                                                                <img alt="phonevector" class="phonevector"
                                                                    src="../../../../assets/promotion/Email.svg">
                                                                <span class="ml-1">Email</span>
                                                            </ng-template>
                                                            <div class="campaign-template-preview">
                                                                <div class="template-email-root">
                                                                    <img alt="phonevector" class="phonevector"
                                                                        src="../../../../assets/images/phonevector.svg">
                                                                    <div class="wrapper">
                                                                        <div
                                                                            style="display: flex;justify-content: center;align-items: center;height: 445px;">
                                                                            <button type="button"
                                                                                class="btn btn-success"
                                                                                data-toggle="modal"
                                                                                data-target="#myModalSummary">Preview</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </mat-tab>
                                                        <mat-tab>
                                                            <ng-template mat-tab-label>
                                                                <img alt="phonevector" class="phonevector"
                                                                    src="../../../../assets/promotion/POS.svg">
                                                                <span class="ml-1">POS</span>
                                                            </ng-template>
                                                            <div class="cashier preview" style="text-align: center;">
                                                                <img src="../../../../assets/images/preview-pos.png"
                                                                    style="width: 360px;" />
                                                                <div class="message-content">
                                                                    <div>
                                                                        <div>
                                                                            {{this.firstFormGroup.controls['promotionalMessage1'].value}}
                                                                        </div>
                                                                        <div *ngIf='showPromo2 == true'>
                                                                            {{this.firstFormGroup.controls['promotionalMessage2'].value}}
                                                                        </div>
                                                                        <div>
                                                                            Exp.
                                                                            {{this.firstFormGroup.controls['offerEndDate'].value|
                                                                            date: 'dd MMM, YYYY'}}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </mat-tab>
                                                        <mat-tab *ngIf='packageDetails.isNotification == true'>
                                                            <ng-template mat-tab-label>
                                                                <img alt="phonevector" class="phonevector"
                                                                    src="../../../../assets/promotion/Mobile-App.svg">
                                                                <span class="ml-1">Mobile-App</span>
                                                            </ng-template>
                                                            <div class="campaign-template-preview">
                                                                <div class="template-email-root">
                                                                    <img alt="phonevector" class="phonevector"
                                                                        src="../../../../assets/images/phonevector.svg">
                                                                    <div class="wrapper">
                                                                        <div
                                                                            style="background: #486673;color: white;padding: 10px;border-radius: 10px;">
                                                                            <p
                                                                                style="padding-bottom: 0px !important;margin-bottom: 0px !important;">
                                                                                {{businessGroupName}} sent you a
                                                                                promotion
                                                                                valid till
                                                                                {{this.firstFormGroup.controls['offerEndDate'].value|
                                                                                date: 'dd MMM,
                                                                                YYYY'}}
                                                                            </p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </mat-tab>
                                                    </mat-tab-group>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </mat-step>
                        </mat-stepper>
                        <div *ngIf="isLoadingSaveData"
                            class="d-flex mx-2 my-2 justify-content-center align-items-center" style="height: 100%; top: 0%;
                        left: 50%;position: absolute;">
                            <div class="spinner-border" role="status">
                                <span class="sr-only">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-template #wizard>
    <div class="row" style="display: inline-flex;align-items: center;justify-content: center;margin-bottom: 10px;">
        <b style="text-align: center;"> Do you want to Draft save this promotion ? </b>
    </div>
    <div class="row">
        <div class="col-md-12" style="display: inline-flex;align-items: center;justify-content: center;">
            <div class="col-md-3"></div>
            <div class="col-md-7">
                <button class="btn btn-dark text-center" (click)="closePopup()">
                    Discard Changes
                </button>
            </div>
            <div class="col-md-2"></div>
        </div>
    </div>
</ng-template>