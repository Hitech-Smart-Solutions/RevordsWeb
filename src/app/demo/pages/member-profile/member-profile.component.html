<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
  integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
  crossorigin="anonymous"
/>

<div class="row">
  <div class="col">
    <div class="card">
      <div class="card-body card-pad">
        <div class="row" style="display: flex; align-items: center; justify-items: center">
          <div class="col-md-2 avtar avtar-lg avtar-new" style="text-align: center">
            <i class="fa fa-users" style="color: #a17c43; font-size: 20px"></i>
          </div>
          <div class="col-md-6 header-text" style="text-align: center; padding: 0; margin: 0; font-size: 15px"> Customers </div>
          <div
            class="col-md-4"
            style="font-size: 18px; cursor: pointer; text-align: center; padding: 0; margin: 0"
            (click)="common(0)"
            [ngbTooltip]="tooltiptotalmembers"
          >
            <span *ngIf="totalMembers > 1000">{{ totalMembers | number: '3.0-5' }}</span>
            <span *ngIf="totalMembers <= 1000">{{ totalMembers }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col">
    <div class="card">
      <div class="card-body card-pad">
        <div class="row" style="display: flex; align-items: center; justify-items: center">
          <div
            class="col-md-2 avtar avtar-lg avtar-new"
            style="background-image: linear-gradient(#b97140, 60%, #d5a480); text-align: center"
          >
            <i class="fa fa-trophy" style="color: white; font-size: 20px"></i>
          </div>
          <div class="col-md-6 header-text" style="text-align: center; padding: 0; margin: 0; font-size: 15px"> Bronze </div>
          <div
            class="col-md-4"
            style="font-size: 18px; cursor: pointer; text-align: center; padding: 0; margin: 0"
            (click)="common(1)"
            [ngbTooltip]="tooltipbronzemembers"
          >
            <span *ngIf="bronze > 1000">{{ bronze | number: '3.0-5' }}</span>
            <span *ngIf="bronze <= 1000">{{ bronze }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col">
    <div class="card">
      <div class="card-body card-pad">
        <div class="row" style="display: flex; align-items: center; justify-items: center">
          <div
            class="col-md-2 avtar avtar-lg avtar-new"
            style="background-image: linear-gradient(#c0c0c0, 60%, #ececed); text-align: center"
          >
            <i class="fa fa-trophy" style="color: white; font-size: 20px"></i>
          </div>
          <div class="col-md-6 header-text" style="text-align: center; padding: 0; margin: 0; font-size: 15px"> Silver </div>
          <div
            class="col-md-4"
            style="font-size: 18px; cursor: pointer; text-align: center; padding: 0; margin: 0"
            (click)="common(2)"
            [ngbTooltip]="tooltipsilvermembers"
          >
            <span *ngIf="silver > 1000">{{ silver | number: '3.0-5' }}</span>
            <span *ngIf="silver <= 1000">{{ silver }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col">
    <div class="card">
      <div class="card-body card-pad">
        <div class="row" style="display: flex; align-items: center; justify-items: center">
          <div
            class="col-md-2 avtar avtar-lg avtar-new"
            style="background-image: linear-gradient(#de972f, 60%, #eac95a); text-align: center"
          >
            <i class="fa fa-trophy" style="color: white; font-size: 20px"></i>
          </div>
          <div class="col-md-6 header-text" style="text-align: center; padding: 0; margin: 0; font-size: 15px"> Gold </div>
          <div
            class="col-md-4"
            style="font-size: 18px; cursor: pointer; text-align: center; padding: 0; margin: 0"
            (click)="common(3)"
            [ngbTooltip]="tooltipgoldmembers"
          >
            <span *ngIf="gold > 1000">{{ gold | number: '3.0-5' }}</span>
            <span *ngIf="gold <= 1000">{{ gold }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col">
    <div class="card">
      <div class="card-body card-pad">
        <div class="row" style="display: flex; align-items: center; justify-items: center">
          <div
            class="col-md-2 avtar avtar-lg avtar-new"
            style="background-image: linear-gradient(#8605c2, 60%, #dab9ef); text-align: center"
          >
            <i class="fa fa-trophy" style="color: white; font-size: 20px"></i>
          </div>
          <div class="col-md-6 header-text" style="text-align: center; padding: 0; margin: 0; font-size: 15px"> Platinum </div>
          <div
            class="col-md-4"
            style="font-size: 18px; cursor: pointer; text-align: center; padding: 0; margin: 0"
            (click)="common(4)"
            [ngbTooltip]="tooltipplatinummembers"
          >
            <span *ngIf="platinum > 1000">{{ platinum | number: '3.0-5' }}</span>
            <span *ngIf="platinum <= 1000">{{ platinum }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <form [formGroup]="MemeberProfileGroup">
    <div class="row">
      <div class="col">
        <div class="input-group mb-2">
          <button
            type="button"
            style="width: 100%; background-color: #7da3ba"
            class="btn btn-primary"
            data-toggle="modal"
            data-target="#newCustomer"
            (click)="NewMember()"
            >Add Customer
            <i class="fa fa-user" style="float: left"></i>
          </button>
        </div>
      </div>

      <div class="col">
        <ng-multiselect-dropdown
          [placeholder]="'Choose Tag'"
          (onSelect)="common(0)"
          [settings]="dropdownSettingsSingle"
          [data]="tagList"
          (onDeSelect)="common(0)"
          formControlName="tags"
        >
        </ng-multiselect-dropdown>
      </div>

      <div class="col">
        <input
          class="form-control text-box"
          type="text"
          name="search"
          (keydown)="common(0)"
          formControlName="search"
          autocomplete="off"
          ngbTooltip="Search customers by name or phone number (min 3 characters needed to search)"
          placeholder="Search by name or phone number"
        />
        <img src="../../../assets/img/Search.png" style="position: absolute; right: 8%; top: 19%; height: 20px; width: 20px" />
      </div>

      <div class="col">
        <ng-multiselect-dropdown
          [placeholder]="'Choose business locations'"
          (onSelect)="common(0)"
          (onSelectAll)="onItemSelectAll($event)"
          [settings]="dropdownSettings"
          [data]="bussinessData"
          (onDeSelect)="common(0)"
          formControlName="business"
          (onDeSelectAll)="onDeSelectAll($event)"
        >
        </ng-multiselect-dropdown>
      </div>

      <div class="col">
        <button type="button" style="width: 100%" class="btn btn-success" (click)="exportexcel()">
          <i class="fa fa-file-excel-o" style="float: left"></i>
          Export To Excel
        </button>
      </div>
    </div>
  </form>
</div>

<div>
  <form [formGroup]="jobForm" (ngSubmit)="Submit()">
    <div class="modal fade" id="newCustomer" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document" style="height: 100%; display: flex; justify-content: center; align-items: center">
        <div class="modal-content">
          <div class="modal-header">
            <div class="col-md-11" style="text-align: center">
              <h3 class="modal-title" id="exampleModalLongTitle">Add New Customer</h3>
            </div>
            <div class="col-md-1">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
          </div>
          <div class="modal-body">
            <div class="row" style="margin-bottom: 8px">
              <div class="col">
                <!-- <label for="phoneNo" class="col-form-label">Phone No:</label> -->
                <input
                  type="text"
                  class="form-control"
                  autocomplete="off"
                  formControlName="phoneNumber"
                  id="phoneNo"
                  placeholder="Enter mobile number"
                  (keypress)="numberOnly($event)"
                  (input)="OnPhoneNumberEntererd()"
                  [ngClass]="{ 'is-invalid': isSubmitted && jobForm.controls['phoneNumber'].errors }"
                />
                <div *ngIf="memberData != null" class="invalid-feedback"> Member already exists ! </div>
                <div *ngIf="jobForm.controls['phoneNumber'].errors" class="invalid-feedback">
                  <div *ngIf="isSubmitted && jobForm.controls['phoneNumber'].errors['required']"> Phone Number is required </div>
                  <div
                    *ngIf="
                      isSubmitted &&
                      (jobForm.controls['phoneNumber'].errors['minlength'] || jobForm.controls['phoneNumber'].errors['maxlength'])
                    "
                  >
                    Phone Number must be 10 digit
                  </div>
                </div>
              </div>
              <div class="col">
                <!-- <label for="points" class="col-form-label">Add/remove pts:</label> -->
                <input
                  type="number"
                  class="form-control"
                  id="points"
                  (keypress)="numberOnly($event)"
                  min="0"
                  formControlName="pointstobeadded"
                  placeholder="Add points"
                  autocomplete="off"
                />
              </div>
            </div>

            <div class="row" style="margin-bottom: 8px">
              <div class="col">
                <!-- <label for="name" class="col-form-label">Name:</label> -->
                <input
                  type="text"
                  class="form-control"
                  id="name"
                  [disabled]="disableMemberName"
                  formControlName="memberName"
                  placeholder="Name"
                />
              </div>
            </div>

            <div class="row" style="margin-bottom: 8px">
              <div class="col">
                <!-- <label for="emailid" class="col-form-label">Email:</label> -->
                <input type="email" class="form-control" id="emailid" formControlName="email" placeholder="Email" />
              </div>
            </div>

            <div class="row" style="margin-bottom: 8px">
              <div class="col">
                <!-- <label for="monthName" class="col-form-label">Birth Month:</label> -->
                <ng-multiselect-dropdown
                  [placeholder]="'Choose Month'"
                  id="monthName"
                  [settings]="dropdownSettingsMonth"
                  [data]="monthlist"
                  formControlName="monthID"
                >
                </ng-multiselect-dropdown>
              </div>
              <div class="col">
                <!-- <label for="day" class="col-form-label">Birth Date:</label> -->
                <ng-multiselect-dropdown
                  [placeholder]="'Choose Date'"
                  id="day"
                  [settings]="dropdownSettingsDate"
                  [data]="dayList"
                  formControlName="dayID"
                >
                </ng-multiselect-dropdown>
              </div>
            </div>

            <div class="row" style="margin-bottom: 8px">
              <div class="col">
                <!-- <label for="location" class="col-form-label">Business Location:</label> -->
                <ng-multiselect-dropdown
                  [placeholder]="'Choose business locationsiness Location'"
                  id="location"
                  [settings]="dropdownSettingsSingleBusiness"
                  [data]="bussinessData"
                  formControlName="businessLocationID"
                >
                </ng-multiselect-dropdown>
                <div style="width: 100%" *ngIf="isSubmitted && jobForm.controls['businessLocationID'].errors" class="invalid-feedback">
                  <div *ngIf="jobForm.controls['businessLocationID'].errors['required']"> Business Location is required </div>
                </div>
              </div>             
            </div>            

            <div class="row" style="margin-bottom: 8px">
              <div class="col">
                <!-- <label for="notes" class="col-form-label">Notes:</label> -->
                <textarea id="notes" class="form-control" placeholder="Add note" formControlName="notes" maxlength="1024"></textarea>
              </div>
            </div>

            <div class="row" style="margin-bottom: 8px">
              <div class="col d-flex align-items-center">
                <label for="highroller" class="col-form-label mr-1">High Roller? :</label> &nbsp;
                <input type="checkbox" id="highroller" (change)="handleHighRollerChange($event)" formControlName="isHighroller" style="height: 16px" />
              </div>
              <div class="col d-flex align-items-center">
                <label for="freeplayer" class="col-form-label mr-1">Free Player? :</label> &nbsp;
                <input type="checkbox" id="freeplayer" formControlName="isFreeplayer" (change)="handleFreePlayerChange($event)" style="height: 16px" />
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal" #closebutton>Close</button>
            <button type="submit" class="btn btn-primary" *ngIf="memberData == null" [disabled]="isLoading" data-dismiss="#newCustomer">
              <i class="fa" [ngClass]="{ 'fa-spin fa-spinner': isLoading, 'fa-check': !isLoading }"></i>
              <span class="ng-binding">Save Changes</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div
      class="modal fade member-modal"
      id="GoalModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
      style="z-index: 500000"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header row">
            <div class="col-md-7">
              <div class="image pull-left">
                <img
                  ng-src="https://loyalty-static.fivestars.com/c78f2959fd/images/merchant/empty-profile.png"
                  src="https://loyalty-static.fivestars.com/c78f2959fd/images/merchant/empty-profile.png"
                />
              </div>
              <div class="member pull-left">
                <span class="name semi-bold ng-binding">{{ memberName }}</span>
                <br />
                <span class="count ng-binding phoneNum">{{ this.jobForm.controls['phoneNumber'].value | phone }} </span>
                <br />
                <div class="since large-screen ng-binding" style="font-size: 12px"
                  >Since {{ membersince | utcToLocalTime: 'shortDate' }}</div
                >
                <div class="since small-screen ng-binding">Last {{ lastvisit | utcToLocalTime: 'short' }}</div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="row">
                <div class="col-md-6">
                  <div class="group new">
                    <div
                      class="chip-head"
                      [ngStyle]="{
                        'background-image':
                          this.badgename == 'Bronze'
                            ? 'linear-gradient(#B97140, 60%, #d5a480 )'
                            : this.badgename == 'Gold'
                            ? 'linear-gradient(#de972f, 60%, #eac95a )'
                            : this.badgename == 'Silver'
                            ? 'linear-gradient(#C0C0C0,60% , #ECECED )'
                            : 'linear-gradient(#8605C2,60% , #dab9ef )'
                      }"
                    >
                      <i class="fa fa-trophy" style="font-size: 15px; color: white"></i>
                    </div>
                  </div>

                  <div class="group new">
                    {{ tagname }}
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="point-count regular-weight no-wrap"> {{ currentpoints }} Pt </div>
                  <div ng-class="{ unreachable: !memberInfo.reachable }" class="icon-row" style="float: right; margin-top: 22px">
                    <img
                      src="../../../../assets/promotion/textSMS.svg"
                      style="height: 18px"
                      [ngClass]="{ heightClass: smsOptin == true, 'disableicon heightClass': !smsOptin }"
                    />
                    <img
                      src="../../../../assets/img/icons/Email.svg"
                      style="height: 18px"
                      [ngClass]="{ heightClass: emailOptin == true, 'disableicon heightClass': !emailOptin }"
                    />
                    <img
                      src="../../../../assets/img/icons/Mobile-App.svg"
                      style="height: 18px"
                      [ngClass]="{ heightClass: notificationOptin == true, 'disableicon heightClass': !notificationOptin }"
                    />
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-1">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
          </div>
          <div class="row member-modal-row first-row">
            <div class="row">
              <div class="col-md-6">
                <div class="point-copy regular-weight">Add/remove from current pts:</div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="point-incrementer">
                  <button
                    type="button"
                    class="btn btn-primary"
                    ng-disabled="submitLoading"
                    (click)="subtractPoints()"
                    has-permission="dashboard_business_manager"
                    fs-track-tap="Point_Subtract"
                  >
                    <i class="fa fa-caret-down"></i>
                  </button>
                  <input
                    class="point ng-valid ng-dirty"
                    type="text"
                    name="points"
                    custom-input=""
                    regex="/[+|-]{0,1}\d{0,4}/"
                    formControlName="pointstobeadded"
                    id="txtpointadd"
                    ng-disabled="false"
                    value="0"
                    ng-model="pointsDelta.value"
                    has-permission="dashboard_business_manager"
                  />
                  <button
                    type="button"
                    class="btn btn-primary"
                    ng-disabled="submitLoading"
                    (click)="addPoints()"
                    has-permission="dashboard_business_manager"
                    fs-track-tap="Point_Add"
                    id="btnAddpoint"
                  >
                    <i class="fa fa-caret-up"></i>
                  </button>
                </div>
              </div>
              <div class="member-overview col-md-3" style="display: grid; text-align: center">
                <span class="count ng-binding">{{ totalvisits }}</span>
                <span class="expanded">Total Visits</span>
              </div>
              <div class="member-overview col-md-3" style="display: grid; text-align: center">
                <span class="lifetime-points count ng-binding">{{ lifetimepoints }}</span>
                Lifetime Pts
              </div>
            </div>
          </div>
          <div class="row member-modal-row">
            <div class="col-md-5">
              <input
                type="text"
                disabled
                [disabled]="disableMemberName"
                formControlName="memberName"
                placeholder="Name"
                class="form-control"
              />
            </div>
            <div class="col-md-5">
              <div class="dropdown fs-dropdown birthday-dropdown month-dropdown disabled">
                <a
                  class="fs-dropdown-toggle ng-isolate-scope"
                  open-class="fs-dropdown-open"
                  ng-disabled="memberInfo.web_registered"
                  fs-track-tap="Birth_Month"
                  disabled="disabled"
                >
                  <div class="selected-option">
                    <select class="form-control" formControlName="monthID">
                      <option *ngFor="let month of monthlist" [ngValue]="month.id">{{ month.name }}</option>
                    </select>
                  </div>
                </a>
              </div>
            </div>
            <div class="col-md-2">
              <div class="dropdown fs-dropdown birthday-dropdown day-dropdown disabled">
                <a
                  class="fs-dropdown-toggle ng-isolate-scope"
                  open-class="fs-dropdown-open"
                  ng-disabled="memberInfo.web_registered"
                  fs-track-tap="Birth_Day"
                  disabled="disabled"
                >
                  <div class="selected-option">
                    <select class="form-control" formControlName="dayID">
                      <option *ngFor="let day of dayList" [ngValue]="day.id">{{ day.name }}</option>
                    </select>
                  </div>
                </a>
              </div>
            </div>
          </div>
          <div class="row member-modal-row">
            <div class="col-md-12 email">
              <input
                type="email"
                formControlName="email"
                placeholder="Email"
                class="form-control email ng-pristine ng-valid ng-valid-email"
              />
            </div>
          </div>
          <div class="row member-modal-row">
            <div class="col-md-12">
              <textarea
                name="notes"
                placeholder="Add note"
                ng-model="memberInfo.notes"
                ng-disabled="submitLoading"
                formControlName="notes"
                has-permission="dashboard_business_manager"
                ng-maxlength="1024"
                fs-track-tap="Notes"
                class="form-control ng-pristine ng-valid ng-valid-maxlength"
              ></textarea>
            </div>
          </div>
          <div class="row member-modal-row">
            <div class="col-md-12">
              <div class="dropdown fs-dropdown birthday-dropdown day-dropdown disabled">
                <a
                  class="fs-dropdown-toggle ng-isolate-scope"
                  open-class="fs-dropdown-open"
                  ng-disabled="memberInfo.web_registered"
                  fs-track-tap="Business_Location"
                  disabled="disabled"
                >
                  <div class="selected-option">
                    <select class="form-control" formControlName="businessLocationID">
                      <option *ngFor="let b of bussinessData" [ngValue]="b.id">{{ b.businessName }}</option>
                    </select>
                  </div>
                </a>
              </div>
              <div style="width: 100%" *ngIf="isSubmitted && jobForm.controls['businessLocationID'].errors" class="invalid-feedback">
                <div *ngIf="jobForm.controls['businessLocationID'].errors['required']"> Business Location is required </div>
              </div>
            </div>
          </div>
          <div class="row member-modal-row" style="padding-top: 8px; padding-bottom: 8px">
            <div class="col-md-6" style="display: flex; align-items: center">
              <div class="col-md-6">
                <label for="highroller" class="col-form-label">High Roller?:</label>
              </div>
              <div class="col-md-3 d-flex">
                <input type="checkbox" id="highroller" (change)="handleHighRollerChange($event)" formControlName="isHighroller" style="height: 16px; margin: 0; padding: 0" />
              </div>
              <div class="col-md-3"></div>
            </div>
            <div class="col-md-6" style="display: flex; align-items: center">
              <div class="col-md-6">
                <label for="freePlayer" class="col-form-label">Free Player?:</label>
              </div>
              <div class="col-md-3 d-flex">
                <input type="checkbox" id="freePlayer" (change)="handleFreePlayerChange($event)" formControlName="isFreeplayer" style="height: 16px; margin: 0; padding: 0" />
              </div>
              <div class="col-md-3"></div>
            </div>
          </div>
          <div class="row member-modal-row" style="padding-top: 8px; padding-bottom: 8px">
            <div class="col-md-12 text-center">
              <button type="button" data-dismiss="modal" #closebutton1 class="close"></button>
              <button
                type="submit"
                id="closeModal"
                [disabled]="isLoading"
                class="btn btn-secondary bold pull-right save-member-changes"
                has-permission="dashboard_business_manager"
                data-dismiss="#GoalModal"
                fs-track-tap="Save_Changes"
              >
                <i class="fa" [ngClass]="{ 'fa-spin fa-spinner': isLoading, 'fa-check': !isLoading }"></i>
                <span class="ng-binding">Save Changes</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>

  <div class="row">
    <div class="col-md-12">
      <table id="tabl" style="display: none">
        <tbody>
          <tr> </tr>
        </tbody>
      </table>

      <mat-table
        class="mat-elevation-z8"
        mat-table
        [dataSource]="dataSource"
        (matSortChange)="announceSortChange($event)"
        multiTemplateDataRows
        matSort
      >
        <ng-container matColumnDef="name">
          <th
            style="text-align: center; width: 15%"
            mat-header-cell
            class="custom-mat-header-styling tableHeaderCellDiv"
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by name"
          >
            Name
          </th>
          <td style="width: 15%" mat-cell *matCellDef="let element" class="tabletd">
            <div style="display: flex; align-items: center; padding-left: 10%">
              <div>
                <img src="../../../assets/img/empty-profile.png" style="width: 45px; height: 45px" />
              </div>
              <div
                style="color: #203139; font-weight: 700; cursor: pointer; font-size: 14px; padding-left: 5px"
                data-toggle="modal"
                data-target="#GoalModal"
                (click)="EditProfile(element.id)"
              >
                {{ element.name }}
                <div style="padding-top: 2px; display: flex; background-color: #faf3f3; border-radius: 4px">
                  <img
                    src="../../../../assets/promotion/textSMS.svg"
                    style="height: 18px"
                    [ngClass]="{ heightClass: element.smsOptin == true, 'disableicon heightClass': !element.smsOptin }"
                  />
                  <img
                    src="../../../../assets/img/icons/Email.svg"
                    style="height: 18px"
                    [ngClass]="{
                      heightClass: element.emailOptin == true && element.emailId != null,
                      'disableicon heightClass': !element.emailOptin || element.emailId == null
                    }"
                  />
                  <img
                    src="../../../../assets/img/icons/Mobile-App.svg"
                    style="height: 18px"
                    [ngClass]="{ heightClass: element.notificationOptIn == true, 'disableicon heightClass': !element.notificationOptIn }"
                  />
                </div>
              </div>
            </div>
          </td>
        </ng-container>
        <ng-container matColumnDef="phone">
          <th
            style="text-align: center; width: 10%"
            mat-header-cell
            class="custom-mat-header-styling tableHeaderCellDiv"
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by phone"
          >
            Phone
          </th>
          <td style="width: 10%; text-align: center" mat-cell class="tabletd" *matCellDef="let element">
            {{ element.phone | phone }}
          </td>
        </ng-container>

        <ng-container matColumnDef="status">
          <th
            style="width: 10%; text-align: center"
            mat-header-cell
            class="custom-mat-header-styling tableHeaderCellDiv"
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by status"
          >
            Badge
          </th>
          <td mat-cell class="tabletd" *matCellDef="let element" style="width: 10%; text-align: center">
            <div class="chip">
              <div
                class="chip-head"
                [ngStyle]="{
                  'background-image':
                    element.status == 'Bronze'
                      ? 'linear-gradient(#B97140, 60%, #d5a480 )'
                      : element.status == 'Gold'
                      ? 'linear-gradient(#de972f, 60%, #eac95a )'
                      : element.status == 'Silver'
                      ? 'linear-gradient(#C0C0C0,60% , #ECECED )'
                      : 'linear-gradient(#8605C2,60% , #dab9ef )'
                }"
              >
                <i class="fa fa-trophy" style="font-size: 15px; color: white"></i>
              </div>
              <div class="chip-content">{{ element.status }}</div>
            </div>
          </td>
        </ng-container>

        <ng-container matColumnDef="source">
          <th
            style="text-align: center; width: 10%"
            mat-header-cell
            class="custom-mat-header-styling tableHeaderCellDiv"
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by source"
          >
            Source
          </th>
          <td mat-cell class="tabletd" *matCellDef="let element" style="width: 10%"> {{ element.source }} </td>
        </ng-container>

        <ng-container matColumnDef="currentpoints">
          <th
            style="text-align: center; width: 10%"
            mat-header-cell
            class="custom-mat-header-styling tableHeaderCellDiv"
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by currentpoints"
          >
            Current Points
          </th>
          <td mat-cell class="tabletd" *matCellDef="let element" style="width: 10%; text-align: center"> {{ element.currentpoints }}pt </td>
        </ng-container>

        <ng-container matColumnDef="lifetimepoints">
          <th
            style="text-align: center; width: 10%"
            mat-header-cell
            class="custom-mat-header-styling tableHeaderCellDiv"
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by lifetimepoints"
          >
            Lifetime Points
          </th>
          <td mat-cell class="tabletd" *matCellDef="let element" style="width: 10%; text-align: center">
            {{ element.lifetimepoints }}pt
          </td>
        </ng-container>

        <ng-container matColumnDef="lastvisit">
          <th
            style="text-align: center; width: 15%"
            mat-header-cell
            class="custom-mat-header-styling tableHeaderCellDiv"
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by lastvisit"
          >
            Last Visit
          </th>
          <td mat-cell class="tabletd" *matCellDef="let element" style="width: 15%">{{ element.lastvisit | utcToLocalTime: 'short' }} </td>
        </ng-container>

        <ng-container matColumnDef="membersince">
          <th
            style="text-align: center; width: 10%"
            mat-header-cell
            class="custom-mat-header-styling tableHeaderCellDiv"
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by membersince"
          >
            Customer Since
          </th>
          <td mat-cell class="tabletd" *matCellDef="let element" style="width: 10%; text-align: center">
            {{ element.membersince | utcToLocalTime: 'shortDate' }}
          </td>
        </ng-container>

        <ng-container matColumnDef="istagged">
          <th
            style="text-align: center; width: 15%"
            mat-header-cell
            class="custom-mat-header-styling tableHeaderCellDiv"
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by tagname"
          >
            Tag
          </th>
          <td mat-cell class="tabletd" *matCellDef="let element" style="width: 15%; text-align: center">
            <div style="display: flex; align-items: center; justify-content: center">
              <div *ngIf="element.tagname" class="badge badge-primary" style="background-color: #7da3ba"> #{{ element.tagname }}</div>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row class="tableHeaderCellDiv" *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </mat-table>
      <div class="col-lg-12 divmore">
        <button
          mat-raised-button
          color="basic"
          class="more"
          [disabled]="disableBtnPrevious"
          (click)="showPrevious()"
          style="font-weight: bold; font-size: 13px"
          >Prev
        </button>
        <span style="padding: 10px; vertical-align: middle; font-weight: 500; color: #5d5b74; font-size: 14px"
          >Page {{ pageNumber }} of
          <span> {{ totalPages }} </span>
        </span>
        <button
          mat-raised-button
          class="more"
          color="basic"
          [disabled]="disableBtnNext"
          (click)="showNext()"
          style="font-weight: bold; font-size: 13px"
          >Next</button
        >
      </div>
    </div>
  </div>

  <div *ngIf="isLoading" class="d-flex justify-content-center">
    <div class="spinner-border" role="status">
      <span class="sr-only">Loading...</span>
    </div>
  </div>
</div>
