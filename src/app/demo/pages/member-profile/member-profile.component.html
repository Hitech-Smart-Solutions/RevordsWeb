<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
  integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
  crossorigin="anonymous"
/>

<div class="row">
  <div class="col">
    <div class="card">
      <div class="card-body card-pad">
        <div class="row" style="display: flex; align-items: center; justify-items: center">
          <div class="col-md-2 avtar avtar-lg avtar-new" style="text-align: center">
            <i class="fa fa-users" style="color: #a17c43; font-size: 20px"></i>
          </div>
          <div class="col-md-6 header-text" style="text-align: center; padding: 0; margin: 0; font-size: 15px"> Customers </div>
          <div
            class="col-md-4"
            style="font-size: 18px; cursor: pointer; text-align: center; padding: 0; margin: 0"
            (click)="common(0)"
            [ngbTooltip]="tooltiptotalmembers"
          >
            <span *ngIf="totalMembers > 1000">{{ totalMembers | number: '3.0-5' }}</span>
            <span *ngIf="totalMembers <= 1000">{{ totalMembers }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col">
    <div class="card">
      <div class="card-body card-pad">
        <div class="row" style="display: flex; align-items: center; justify-items: center">
          <div
            class="col-md-2 avtar avtar-lg avtar-new"
            style="background-image: linear-gradient(#b97140, 60%, #d5a480); text-align: center"
          >
            <i class="fa fa-trophy" style="color: white; font-size: 20px"></i>
          </div>
          <div class="col-md-6 header-text" style="text-align: center; padding: 0; margin: 0; font-size: 15px"> Bronze </div>
          <div class="col-md-4" style="font-size: 18px; cursor: pointer; text-align: center; padding: 0; margin: 0" (click)="common(1)">
            <span *ngIf="bronze > 1000">{{ bronze | number: '3.0-5' }}</span>
            <span *ngIf="bronze <= 1000">{{ bronze }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col">
    <div class="card">
      <div class="card-body card-pad">
        <div class="row" style="display: flex; align-items: center; justify-items: center">
          <div
            class="col-md-2 avtar avtar-lg avtar-new"
            style="background-image: linear-gradient(#c0c0c0, 60%, #ececed); text-align: center"
          >
            <i class="fa fa-trophy" style="color: white; font-size: 20px"></i>
          </div>
          <div class="col-md-6 header-text" style="text-align: center; padding: 0; margin: 0; font-size: 15px"> Silver </div>
          <div class="col-md-4" style="font-size: 18px; cursor: pointer; text-align: center; padding: 0; margin: 0" (click)="common(2)">
            <span *ngIf="silver > 1000">{{ silver | number: '3.0-5' }}</span>
            <span *ngIf="silver <= 1000">{{ silver }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col">
    <div class="card">
      <div class="card-body card-pad">
        <div class="row" style="display: flex; align-items: center; justify-items: center">
          <div
            class="col-md-2 avtar avtar-lg avtar-new"
            style="background-image: linear-gradient(#de972f, 60%, #eac95a); text-align: center"
          >
            <i class="fa fa-trophy" style="color: white; font-size: 20px"></i>
          </div>
          <div class="col-md-6 header-text" style="text-align: center; padding: 0; margin: 0; font-size: 15px"> Gold </div>
          <div class="col-md-4" style="font-size: 18px; cursor: pointer; text-align: center; padding: 0; margin: 0" (click)="common(3)">
            <span *ngIf="gold > 1000">{{ gold | number: '3.0-5' }}</span>
            <span *ngIf="gold <= 1000">{{ gold }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col">
    <div class="card">
      <div class="card-body card-pad">
        <div class="row" style="display: flex; align-items: center; justify-items: center">
          <div
            class="col-md-2 avtar avtar-lg avtar-new"
            style="background-image: linear-gradient(#8605c2, 60%, #dab9ef); text-align: center"
          >
            <i class="fa fa-trophy" style="color: white; font-size: 20px"></i>
          </div>
          <div class="col-md-6 header-text" style="text-align: center; padding: 0; margin: 0; font-size: 15px"> Platinum </div>
          <div class="col-md-4" style="font-size: 18px; cursor: pointer; text-align: center; padding: 0; margin: 0" (click)="common(4)">
            <span *ngIf="platinum > 1000">{{ platinum | number: '3.0-5' }}</span>
            <span *ngIf="platinum <= 1000">{{ platinum }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <form [formGroup]="MemeberProfileGroup">
    <div class="row">
      <div class="col">
        <div class="input-group mb-2">
          <button
            type="button"
            style="width: 100%; background-color: #7da3ba"
            class="btn btn-primary"
            data-toggle="modal"
            data-target="#newCustomer"
            (click)="NewMember()"
            >Add Customer
            <i class="fa fa-user" style="float: left"></i>
          </button>
        </div>
      </div>

      <div class="col">
        <ng-multiselect-dropdown
          [placeholder]="'Choose Tag'"
          (onSelect)="common(0)"
          [settings]="dropdownSettingsSingle"
          [data]="tagList"
          (onDeSelect)="common(0)"
          formControlName="tags"
          (onSelectAll)="onTagSelectAll($event)"
          (onDeSelectAll)="onTagDeSelectAll($event)"
        >
        </ng-multiselect-dropdown>
      </div>

      <div class="col">
        <input
          class="form-control text-box"
          type="text"
          name="search"
          (input)="common(0)"
          formControlName="search"
          autocomplete="off"
          ngbTooltip="Search customers by name or phone number (min 3 characters needed to search)"
          placeholder="Search by name or phone number"
        />
        <img src="../../../assets/img/Search.png" style="position: absolute; right: 8%; top: 19%; height: 20px; width: 20px" />
      </div>

      <div class="col">
        <ng-multiselect-dropdown
          [placeholder]="'Choose business locations'"
          (onSelect)="common(0)"
          (onSelectAll)="onItemSelectAll($event)"
          [settings]="dropdownSettings"
          [data]="bussinessData"
          (onDeSelect)="common(0)"
          formControlName="business"
          (onDeSelectAll)="onDeSelectAll($event)"
        >
        </ng-multiselect-dropdown>
      </div>

      <div class="col">
        <button type="button" style="width: 100%" class="btn btn-success" [disabled]="isGenerating" (click)="exportexcel()">
          <i class="fa" [ngClass]="{ 'fa-spin fa-spinner': isGenerating, 'fa-file-excel-o': !isGenerating }" style="float: left"></i>
          Export To Excel
        </button>
      </div>
    </div>
  </form>
</div>

<div>
  <form [formGroup]="jobForm" (ngSubmit)="Submit()">
    <div class="modal fade" id="newCustomer" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document" style="height: 100%; display: flex; justify-content: center; align-items: center">
        <div class="modal-content">
          <div class="modal-header">
            <div class="col-md-11" style="text-align: center">
              <h3 class="modal-title" id="exampleModalLongTitle">Add New Customer</h3>
            </div>
            <div class="col-md-1">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
          </div>
          <div class="modal-body">
            <div class="row" style="margin-bottom: 8px">
              <div class="col">
                <input
                  type="text"
                  class="form-control"
                  autocomplete="off"
                  formControlName="phoneNumber"
                  id="phoneNo"
                  placeholder="Enter mobile number"
                  (keypress)="numberOnly($event)"
                  (input)="OnPhoneNumberEntererd($event)"
                  maxlength="14"
                  minlength="14"
                  [ngClass]="{ 'is-invalid': isSubmitted && jobForm.controls['phoneNumber'].errors }"
                />
                <div *ngIf="memberData != null" class="invalid-feedback"> Member already exists ! </div>
                <div *ngIf="jobForm.controls['phoneNumber'].errors" class="invalid-feedback">
                  <div *ngIf="isSubmitted && jobForm.controls['phoneNumber'].errors['required']"> Phone Number is required </div>
                  <div
                    *ngIf="
                      isSubmitted &&
                      (jobForm.controls['phoneNumber'].errors['minlength'] || jobForm.controls['phoneNumber'].errors['maxlength'])
                    "
                  >
                    Phone Number must be 10 digit
                  </div>
                </div>
              </div>
              <div class="col">
                <input
                  type="number"
                  class="form-control"
                  id="points"
                  (keypress)="numberOnly($event)"
                  min="0"
                  formControlName="pointstobeadded"
                  placeholder="Add points"
                  autocomplete="off"
                />
              </div>
            </div>

            <div class="row" style="margin-bottom: 8px">
              <div class="col">
                <input
                  type="text"
                  class="form-control"
                  id="name"
                  [disabled]="disableMemberName"
                  formControlName="memberName"
                  placeholder="Name"
                  autocomplete="off"
                />
              </div>
            </div>

            <div class="row" style="margin-bottom: 8px">
              <div class="col">
                <input type="email" class="form-control" id="emailid" formControlName="email" placeholder="Email" autocomplete="off" />
              </div>
            </div>

            <div class="row" style="margin-bottom: 8px">
              <div class="col">
                <ng-select [searchable]="true" id="monthName" placeholder="Birth Month" formControlName="monthID">
                  <ng-option *ngFor="let option of monthlist" [value]="option.id">
                    {{ option.name }}
                  </ng-option>
                </ng-select>
              </div>
              <div class="col">
                <ng-select [searchable]="true" id="day" placeholder="Birth Date" formControlName="dayID">
                  <ng-option *ngFor="let option of dayList" [value]="option.id">
                    {{ option.name }}
                  </ng-option>
                </ng-select>
              </div>
            </div>

            <div class="row" style="margin-bottom: 8px">
              <div class="col">
                <ng-select [searchable]="true" id="location" placeholder="Choose Business Location" formControlName="businessLocationID">
                  <ng-option *ngFor="let option of bussinessData" [value]="option.id">
                    {{ option.businessName }}
                  </ng-option>
                </ng-select>
                <div style="width: 100%" *ngIf="isSubmitted && jobForm.controls['businessLocationID'].errors" class="invalid-feedback">
                  <div *ngIf="jobForm.controls['businessLocationID'].errors['required']"> Business Location is required </div>
                </div>
              </div>
            </div>

            <div class="row" style="margin-bottom: 8px">
              <div class="col">
                <textarea
                  id="notes"
                  class="form-control"
                  placeholder="Add note"
                  formControlName="notes"
                  maxlength="1024"
                  autocomplete="off"
                ></textarea>
              </div>
            </div>

            <div class="row" style="margin-bottom: 8px">
              <div class="col d-flex align-items-center">
                <label for="highroller" class="col-form-label mr-1">{{ positiveFlagName }}:</label> &nbsp;
                <input
                  type="checkbox"
                  id="highroller"
                  (change)="handleHighRollerChange($event)"
                  formControlName="isHighroller"
                  style="height: 16px"
                  class="mt-1"
                />
              </div>
              <div class="col d-flex align-items-center">
                <label for="freeplayer" class="col-form-label mr-1">{{ negativeFlagName }}:</label> &nbsp;
                <input
                  type="checkbox"
                  id="freeplayer"
                  formControlName="isFreeplayer"
                  (change)="handleFreePlayerChange($event)"
                  style="height: 16px"
                  class="mt-1"
                />
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal" #closebutton>Close</button>
            <button
              type="submit"
              class="btn btn-success d-flex align-items-center"
              *ngIf="memberData == null"
              [disabled]="isLoading"
              data-dismiss="#newCustomer"
            >
              <i class="fa mr-2" [ngClass]="{ 'fa-spin fa-spinner': isLoading, 'fa-check': !isLoading }"></i>
              <span class="ng-binding">Save Changes</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div
      class="modal fade"
      id="GoalModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
      style="z-index: 500000"
    >
      <div class="modal-dialog" role="document" style="height: 100%; display: flex; justify-content: center; align-items: center">
        <div class="modal-content">
          <div class="modal-header row" style="width: 100%; margin: 0">
            <div class="col-md-7 d-flex align-items-center pl-0">
              <div class="image pull-left" style="margin-right: 5px; width: 17%">
                <img
                  *ngIf="memberImageFile == null || memberImageFile == undefined"
                  src="../../../assets/img/empty-profile.png"
                  style="width: 100%"
                />
                <img
                  *ngIf="memberImageFile != null && memberImageFile != undefined"
                  src="{{ memberImageFile }}"
                  style="width: 100%; border-radius: 50%"
                />
              </div>
              <div class="member pull-left">
                <span class="count ng-binding phoneNum" style="font-size: 16px !important"
                  >{{ this.jobForm.controls['memberName'].value | phone }}
                </span>
                <br />
                <span class="count ng-binding phoneNum">{{ this.jobForm.controls['phoneNumber'].value | phone }} </span>
                <br />
                <span class="count ng-binding" style="color: #454545; font-size: 12px">
                  {{ tagname }}
                </span>
                <div ng-class="{ unreachable: !memberInfo.reachable }" class="group new icon-row d-flex" style="margin-top: 2%">
                  <img
                    src="../../../../assets/promotion/textSMS.svg"
                    style="height: 18px"
                    [ngClass]="{ heightClass: smsOptin == true, 'disableicon heightClass': !smsOptin }"
                  />
                  <img
                    src="../../../../assets/img/icons/Email.svg"
                    style="height: 18px"
                    [ngClass]="{ heightClass: emailOptin == true, 'disableicon heightClass': !emailOptin }"
                  />
                  <img
                    src="../../../../assets/img/icons/Mobile-App.svg"
                    style="height: 18px"
                    [ngClass]="{ heightClass: notificationOptin == true, 'disableicon heightClass': !notificationOptin }"
                  />
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="row">
                <div class="col-md-12 pr-0">
                  <div class="group new d-flex justify-content-end">
                    <div
                      class="chip-headForModal"
                      [ngStyle]="{
                        'background-image':
                          this.badgename == 'Bronze'
                            ? 'linear-gradient(#B97140, 60%, #d5a480 )'
                            : this.badgename == 'Gold'
                            ? 'linear-gradient(#de972f, 60%, #eac95a )'
                            : this.badgename == 'Silver'
                            ? 'linear-gradient(#C0C0C0,60% , #ECECED )'
                            : 'linear-gradient(#8605C2,60% , #dab9ef )'
                      }"
                    >
                      <i class="fa fa-trophy" style="font-size: 25px; color: white"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-1">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close" #closebuttonEdit>
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
          </div>
          <div class="modal-body">
            <div class="row" style="margin-bottom: 8px">
              <div class="col d-flex justify-content-space-between">
                
                <!-- <div class="member-overview" style="width: 18%; display: grid; text-align: center; border-right: 1px solid #7da3ba">
                  Current Pts
                  <span class="lifetime-points count ng-binding">{{ currentpoints }}</span>
                </div>
                <div class="member-overview" style="width: 18%; display: grid; text-align: center; border-right: 1px solid #7da3ba">
                  Lifetime Pts
                  <span class="lifetime-points count ng-binding">{{ lifetimepoints }}</span>
                </div> -->
                <div class="member-overview" style="width: 34%; display: grid; text-align: center; border-right: 1px solid #7da3ba;">
                  <span class="expanded fontWht700">Member Since</span>
                  <span class="lifetime-points count ng-binding">{{ membersince | utcToLocalTime: 'shortDate' }}</span>
                </div>
                <div class="member-overview" style="width: 33%; display: grid; text-align: center; border-right: 1px solid #7da3ba">
                  <span class="expanded fontWht700">Last Visit</span>
                  <span class="lifetime-points count ng-binding">{{
                    lastvisit != null ? (lastvisit | utcToLocalTime: 'shortDate') : '-'
                  }}</span>
                </div>                
                <div class="member-overview" style="width: 33%; display: grid; text-align: center;">
                  <span class="expanded fontWht700">Total Visits</span>
                  <span class="count ng-binding">{{ totalvisits }}</span>
                </div>
              </div>
            </div>

            <div class="row" style="margin-bottom: 8px">
              <!-- <div class="col d-flex align-items-center">
                <input
                  type="number"
                  class="form-control"
                  id="points"
                  (keypress)="numberOnly($event)"
                  min="0"
                  formControlName="pointstobeadded"
                  placeholder="Add points"
                  autocomplete="off"
                />             
              </div> -->
              <div class="col d-flex justify-content-space-between">
                
                <div class="member-overview" style="width: 33%; display: grid; text-align: center; border-right: 1px solid #7da3ba">
                  <span class="expanded fontWht700">Lifetime Points</span>
                  <span class="lifetime-points count ng-binding">{{ lifetimepoints }}</span>
                </div>
                <div class="member-overview" style="width: 34%; display: grid; text-align: center; border-right: 1px solid #7da3ba">
                  <span class="expanded fontWht700">Current Points</span>
                  <span class="lifetime-points count ng-binding">{{ currentpoints }}</span>
                </div>
                <div class="member-overview d-flex justify-content-center" style="width: 33%; text-align: center;">
                  <input
                    style="width: 80%"
                    type="number"
                    class="form-control"
                    id="points"
                    (keypress)="numberOnly($event)"
                    min="0"
                    formControlName="pointstobeadded"
                    placeholder="Add points"
                    autocomplete="off"
                  />
                </div>
              </div>
            </div>

            <div class="row" style="margin-bottom: 8px">
              <div class="col">
                <input
                  type="email"
                  class="form-control"
                  id="emailid"
                  formControlName="email"
                  placeholder="Email"
                  style="color: #4a6779; background-color: #f9f9f9"
                />
              </div>
            </div>

            <div class="row" style="margin-bottom: 8px">
              <div class="col">
                <ng-select [searchable]="true" id="monthName" placeholder="Birth Month" formControlName="monthID">
                  <ng-option *ngFor="let option of monthlist" [value]="option.id">
                    {{ option.name }}
                  </ng-option>
                </ng-select>
              </div>
              <div class="col">
                <ng-select [searchable]="true" id="day" placeholder="Birth Date" formControlName="dayID">
                  <ng-option *ngFor="let option of dayList" [value]="option.id">
                    {{ option.name }}
                  </ng-option>
                </ng-select>
              </div>
            </div>

            <div class="row" style="margin-bottom: 8px">
              <div class="col">
                <ng-select [searchable]="true" id="location" placeholder="Choose Business Location" formControlName="businessLocationID">
                  <ng-option *ngFor="let option of bussinessData" [value]="option.id">
                    {{ option.businessName }}
                  </ng-option>
                </ng-select>
                <div style="width: 100%" *ngIf="isSubmitted && jobForm.controls['businessLocationID'].errors" class="invalid-feedback">
                  <div *ngIf="jobForm.controls['businessLocationID'].errors['required']"> Business Location is required </div>
                </div>
              </div>
            </div>

            <div class="row" style="margin-bottom: 8px">
              <div class="col">
                <textarea
                  id="notes"
                  class="form-control"
                  placeholder="Add note"
                  formControlName="notes"
                  maxlength="1024"
                  autocomplete="off"
                ></textarea>
              </div>
            </div>

            <div class="row" style="margin-bottom: 8px">
              <div class="col d-flex align-items-center">
                <label for="highroller" class="col-form-label mr-1">{{ positiveFlagName }}:</label> &nbsp;
                <input
                  type="checkbox"
                  id="highroller"
                  (change)="handleHighRollerChange($event)"
                  formControlName="isHighroller"
                  style="height: 16px"
                  class="mt-1"
                />
              </div>
              <div class="col d-flex align-items-center">
                <label for="freeplayer" class="col-form-label mr-1">{{ negativeFlagName }}:</label> &nbsp;
                <input
                  type="checkbox"
                  id="freeplayer"
                  formControlName="isFreeplayer"
                  (change)="handleFreePlayerChange($event)"
                  style="height: 16px"
                  class="mt-1"
                />
              </div>
            </div>
          </div>
          <div class="modal-footer" style="justify-content: flex-start">
            <div class="row member-modal-row text-center col-md-12">
              <div class="col-md-6" style="text-align: left !important">
                <h4
                  style="cursor: pointer; color: blue; font-weight: bolder"
                  data-dismiss="modal"
                  data-toggle="modal"
                  data-target="#activity"
                  (click)="getActivityHistoryByMemberID()"
                >
                  View Activity History
                </h4>
              </div>
              <div class="col-md-6">
                <button
                  type="submit"
                  class="btn btn-success d-flex align-items-center float-right"
                  *ngIf="memberData == null"
                  [disabled]="isLoading"
                  data-dismiss="#newCustomer"
                >
                  <i class="fa mr-2" [ngClass]="{ 'fa-spin fa-spinner': isLoading, 'fa-check': !isLoading }"></i>
                  <span class="ng-binding">Save Changes</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="activity" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel1" aria-hidden="true">
      <div
        class="modal-dialog"
        role="document"
        style="height: 100%; display: flex; justify-content: center; align-items: center; width: 850px !important"
      >
        <div class="modal-content" style="width: 850px !important">
          <div class="modal-header">
            <div class="col-md-11" style="text-align: center">
              <h3 class="modal-title" id="exampleModalLongTitle1">
                <span style="color: #226187; float: left"> {{ memberName }} </span>
                <span style="color: #226187; float: right"> {{ phoneNumber | phone }} </span>
              </h3>
            </div>
            <div class="col-md-1">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
          </div>
          <div class="modal-body" style="width: 850px !important">
            <table class="table table-hover table-striped bdr">
              <thead style="display: table; width: 100%; table-layout: fixed">
                <tr>
                  <th style="text-align: center; vertical-align: middle; width: 25%">Date & Time</th>
                  <th scope="col" style="vertical-align: middle; width: 20%">Activity Type</th>
                  <th scope="col" style="text-align: center; vertical-align: middle; width: 35%">Activity Details</th>
                  <th scope="col" style="text-align: center; vertical-align: middle; width: 10%">Duration</th>
                  <th scope="col" style="text-align: center; vertical-align: middle; width: 10%">Points</th>
                </tr>
              </thead>
              <tbody style="display: block; height: 250px; overflow-y: scroll">
                <tr *ngFor="let item of activityHistory; let i = index" style="display: table; width: 100%; table-layout: fixed">
                  <td style="width: 25%">{{ item.datetime | utcToLocalTime: 'short' }}</td>
                  <td style="width: 20%">{{ item.activityType }}</td>
                  <td style="text-align: center; width: 35%">{{ item.rewardName }}</td>
                  <td style="text-align: center; width: 10%">{{ item.timeDuration }}</td>
                  <td style="text-align: center; width: 10%">{{ item.points }}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </form>

  <div class="row">
    <div class="col-md-12">
      <table id="tabl" style="display: none">
        <tbody>
          <tr> </tr>
        </tbody>
      </table>

      <mat-table
        class="mat-elevation-z8"
        mat-table
        [dataSource]="dataSource"
        (matSortChange)="announceSortChange($event)"
        multiTemplateDataRows
        matSort
      >
        <ng-container matColumnDef="name">
          <th
            style="text-align: center; width: 15%"
            mat-header-cell
            class="custom-mat-header-styling tableHeaderCellDiv"
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by name"
          >
            Name
          </th>
          <td style="width: 15%" mat-cell *matCellDef="let element" class="tabletd">
            <div class="row" style="display: flex; align-items: center; padding-left: 10%; overflow-wrap: anywhere">
              <div class="col-md-4 pr-0">
                <img
                  *ngIf="element.memberImageFile == null || element.memberImageFile == undefined"
                  src="../../../assets/img/empty-profile.png"
                  style="width: 100%"
                />
                <img
                  *ngIf="element.memberImageFile != null && element.memberImageFile != undefined"
                  src="https://s3-us-west-1.amazonaws.com/revords.live.files/{{ element.memberImageFile }}"
                  style="width: 100%; border-radius: 50%"
                />
              </div>
              <div class="col-md-8 pl-0">
                <div
                  class="col-md-12"
                  style="color: #203139; font-weight: 700; cursor: pointer; font-size: 14px; padding-left: 5px"
                  data-toggle="modal"
                  data-target="#GoalModal"
                  (click)="EditProfile(element.id)"
                >
                  {{ element.name }}
                </div>
                <div class="col-md-12" style="padding-left: 5px">
                  <img
                    src="../../../../assets/promotion/textSMS.svg"
                    style="height: 18px"
                    [ngClass]="{ heightClass: element.smsOptin == true, 'disableicon heightClass': !element.smsOptin }"
                  />
                  <img
                    src="../../../../assets/img/icons/Email.svg"
                    style="height: 18px"
                    [ngClass]="{
                      heightClass: element.emailOptin == true && element.emailId != null,
                      'disableicon heightClass': !element.emailOptin || element.emailId == null
                    }"
                  />
                  <img
                    src="../../../../assets/img/icons/Mobile-App.svg"
                    style="height: 18px"
                    [ngClass]="{ heightClass: element.notificationOptIn == true, 'disableicon heightClass': !element.notificationOptIn }"
                  />
                </div>
              </div>
            </div>
          </td>
        </ng-container>
        <ng-container matColumnDef="phone">
          <th
            style="text-align: center; width: 10%"
            mat-header-cell
            class="custom-mat-header-styling tableHeaderCellDiv"
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by phone"
          >
            Phone
          </th>
          <td style="width: 10%; text-align: center" mat-cell class="tabletd" *matCellDef="let element">
            {{ element.phone | phone }}
          </td>
        </ng-container>

        <ng-container matColumnDef="status">
          <th
            style="width: 10%; text-align: center"
            mat-header-cell
            class="custom-mat-header-styling tableHeaderCellDiv"
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by status"
          >
            Badge
          </th>
          <td mat-cell class="tabletd" *matCellDef="let element" style="width: 10%">
            <div class="chip">
              <div
                class="chip-head"
                [ngStyle]="{
                  'background-image':
                    element.status == 'Bronze'
                      ? 'linear-gradient(#B97140, 60%, #d5a480 )'
                      : element.status == 'Gold'
                      ? 'linear-gradient(#de972f, 60%, #eac95a )'
                      : element.status == 'Silver'
                      ? 'linear-gradient(#C0C0C0,60% , #ECECED )'
                      : 'linear-gradient(#8605C2,60% , #dab9ef )'
                }"
              >
                <i class="fa fa-trophy" style="font-size: 15px; color: white"></i>
              </div>
              <div class="chip-content">{{ element.status }}</div>
            </div>
          </td>
        </ng-container>

        <ng-container matColumnDef="source">
          <th
            style="text-align: center; width: 10%"
            mat-header-cell
            class="custom-mat-header-styling tableHeaderCellDiv"
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by source"
          >
            Source
          </th>
          <td mat-cell class="tabletd" *matCellDef="let element" style="width: 10%; overflow-wrap: anywhere"> {{ element.source }} </td>
        </ng-container>

        <ng-container matColumnDef="currentpoints">
          <th
            style="text-align: center; width: 10%; padding: 0 !important"
            mat-header-cell
            class="custom-mat-header-styling tableHeaderCellDiv"
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by currentpoints"
          >
            Current Points
          </th>
          <td mat-cell class="tabletd" *matCellDef="let element" style="width: 10%; text-align: center"> {{ element.currentpoints }}pt </td>
        </ng-container>

        <ng-container matColumnDef="lifetimepoints">
          <th
            style="text-align: center; width: 10%"
            mat-header-cell
            class="custom-mat-header-styling tableHeaderCellDiv"
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by lifetimepoints"
          >
            Lifetime Points
          </th>
          <td mat-cell class="tabletd" *matCellDef="let element" style="width: 10%; text-align: center">
            {{ element.lifetimepoints }}pt
          </td>
        </ng-container>

        <ng-container matColumnDef="lastvisit">
          <th
            style="text-align: center; width: 15%"
            mat-header-cell
            class="custom-mat-header-styling tableHeaderCellDiv"
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by lastvisit"
          >
            Last Visit
          </th>
          <td mat-cell class="tabletd" *matCellDef="let element" style="width: 15%">{{ element.lastvisit | utcToLocalTime: 'short' }} </td>
        </ng-container>

        <ng-container matColumnDef="membersince">
          <th
            style="text-align: center; width: 10%"
            mat-header-cell
            class="custom-mat-header-styling tableHeaderCellDiv"
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by membersince"
          >
            Customer Since
          </th>
          <td mat-cell class="tabletd" *matCellDef="let element" style="width: 10%; text-align: center">
            {{ element.membersince | utcToLocalTime: 'shortDate' }}
          </td>
        </ng-container>

        <ng-container matColumnDef="istagged">
          <th
            style="text-align: center; width: 10%"
            mat-header-cell
            class="custom-mat-header-styling tableHeaderCellDiv"
            *matHeaderCellDef
            mat-sort-header
            sortActionDescription="Sort by tagname"
          >
            Tag
          </th>
          <td mat-cell class="tabletd" *matCellDef="let element" style="width: 10%; text-align: center">
            <div style="display: flex; align-items: center; justify-content: center">
              <div *ngIf="element.tagname" class="badge badge-primary" style="background-color: #7da3ba"> #{{ element.tagname }}</div>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row class="tableHeaderCellDiv" *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </mat-table>
      <div class="col-lg-12 divmore">
        <button
          mat-raised-button
          color="basic"
          class="more"
          [disabled]="disableBtnPrevious"
          (click)="showPrevious()"
          style="font-weight: bold; font-size: 13px"
          >Prev
        </button>
        <span style="padding: 10px; vertical-align: middle; font-weight: 500; color: #5d5b74; font-size: 14px"
          >Page {{ pageNumber }} of
          <span> {{ totalPages }} </span>
        </span>
        <button
          mat-raised-button
          class="more"
          color="basic"
          [disabled]="disableBtnNext"
          (click)="showNext()"
          style="font-weight: bold; font-size: 13px"
          >Next</button
        >
      </div>
    </div>
  </div>

  <div *ngIf="isLoading" class="d-flex justify-content-center">
    <div class="spinner-border" role="status">
      <span class="sr-only">Loading...</span>
    </div>
  </div>
</div>
